<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>../../uxc/comps/Panel/UXC.Panel.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/UXC.Calendar.html">UXC.Calendar</a></li>
            
                <li><a href="../classes/UXC.CustomEvent.html">UXC.CustomEvent</a></li>
            
                <li><a href="../classes/UXC.Panel.html">UXC.Panel</a></li>
            
                <li><a href="../classes/UXC.Toggle.html">UXC.Toggle</a></li>
            
                <li><a href="../classes/UXC.Valid.html">UXC.Valid</a></li>
            
                <li><a href="../classes/window.UXC.html">window.UXC</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: ../../uxc/comps/Panel/UXC.Panel.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
(function($){
    !window.UXC &amp;&amp; (window.UXC = { log:function(){} });
    window.Panel = UXC.Panel = Panel;
    /**
     * 弹出层/会话框/提示框&lt;br /&gt;
     * @namespace UXC
     * @class Panel
     * @static
     * @private
     * @uses jQuery
     * @version dev 0.1
     * @author  qiushaowei   &lt;suches@btbtd.org&gt; | 360 UXC-FE Team
     * @link    https://github.com/suchesqiu/360UXC.git
     * @date    2013-06-04
     */
    function Panel( _selector, _headers, _bodys, _footers )
    {
        this._model = new Model( _selector, _headers, _bodys, _footers );
        this._view = new View( this._model );

        this._init();
    }

    $(document).delegate( &#x27;div.UPanel&#x27;, &#x27;click&#x27;, function( _evt ){
        var _panel = $(this), _src = $(_evt.target || _evt.srcElement), _evtName;
        if( _src &amp;&amp; _src.length &amp;&amp; _src.is(&quot;[eventtype]&quot;) ){
            _evtName = _src.attr(&#x27;eventtype&#x27;);
            UXC.log( _evtName, _panel.data(&#x27;PanelInstace&#x27;) );
            _evtName &amp;&amp; _panel.data(&#x27;PanelInstace&#x27;) &amp;&amp; _panel.data(&#x27;PanelInstace&#x27;).trigger( _evtName, _src, _evt );
        }
    });
    
    Panel.prototype =
    {
        _init:
            function()
            {
                UXC.log(&#x27;UXC.Panel.init()&#x27;);
                var _p = this;
                this._model.getPanel().data(&#x27;PanelInstace&#x27;, this);
                this._model.events = {
                    &#x27;close&#x27;:   
                        [
                            function( _evt, _panel ){
                                _panel._view.close();
                            }
                        ]
                     , &#x27;show&#x27;:
                        [
                            function( _evt, _panel ){
                                _panel._view.show();
                            }
                        ]
                     , &#x27;hide&#x27;:
                        [
                            function( _evt, _panel ){
                                _panel._view.hide();
                            }
                        ]
                };
                return this;
            }    

        , on:
            function( _evtName, _cb ){
                _evtName &amp;&amp; ( _evtName = _evtName.toLowerCase() );
                if( !(_evtName in this._model.events) ){
                    this._model.events[ _evtName ] = [];
                }
                if( _cb ) this._model.events[_evtName].unshift( _cb );
            }

        
        , show:
            function(){
                this.trigger(&#x27;beforeshow&#x27;, this._model.getPanel() );
                this.trigger(&#x27;show&#x27;, this._model.getPanel() );
            }

        , hide:
            function(){
                this.trigger(&#x27;beforehide&#x27;, this._model.getPanel() );
                this.trigger(&#x27;hide&#x27;, this._model.getPanel() );
            }

        , close:
            function(){
                this.trigger(&#x27;beforeclose&#x27;, this._model.getPanel() );
                this.trigger(&#x27;close&#x27;, this._model.getPanel() );
            }

        , center:
            function( _with ){
                this.trigger(&#x27;beforecenter&#x27;, this._model.getPanel() );
                this._view.center( _with );
                this.trigger(&#x27;center&#x27;, this._model.getPanel() );
            }

        , selector: function(){ return this._model.getPanel(); }

        , trigger:
            function( _evtName, _srcElement, _evt ){
                UXC.log( &#x27;Panel.trigger&#x27;, _evtName );
                var _p = this;
                _evtName &amp;&amp; ( _evtName = _evtName.toLowerCase() );
                _srcElement &amp;&amp; (_srcElement = $(_srcElement) ) 
                    &amp;&amp; _srcElement.length &amp;&amp; (_srcElement = _srcElement[0]);

                if( !(this._model.events[_evtName] &amp;&amp; this._model.events[_evtName].length) ) return;

                $.each( this._model.events[_evtName], function( _ix, _cb ){
                    if( _cb.call( _srcElement, _evt, _p ) === false ) return false; 
                });

            }

        , header:
            function( _html ){
                if( typeof _html != &#x27;undefined&#x27; ) this._model.getHeader( _html );
                var _selector = this._model.getHeader();
                if( _selector &amp;&amp; _selector.length ) return _selector.html();
            }

        , body:
            function( _html ){
                if( typeof _html != &#x27;undefined&#x27; ) this._model.getBody( _html );
                var _selector = this._model.getBody();
                if( _selector &amp;&amp; _selector.length ) return _selector.html();
            }

        , footer:
            function( _html ){
                if( typeof _html != &#x27;undefined&#x27; ) this._model.getFooter( _html );
                var _selector = this._model.getFooter();
                if( _selector &amp;&amp; _selector.length ) return _selector.html();
            }

        , panel:
            function( _html ){
                if( typeof _html != &#x27;undefined&#x27; ) this._model.getPanel( _html );
                var _selector = this._model.getPanel();
                if( _selector &amp;&amp; _selector.length ) return _selector.html();
            }
    }
    
    function Model( _selector, _headers, _bodys, _footers )
    {
        this.tpl = _deftpl;

        this._selector = _selector;
        this._headers = _headers;
        this._bodys = _bodys;
        this._footers = _footers;

        this._panel;

        this._init();

        this.events = {};
    }
    
    Model.prototype =
    {
        _init:
            function()
            {
                if( typeof this._selector  == &#x27;undefined&#x27; || $(this._selector).length === 0 ){
                    this._footers = this._bodys;
                    this._bodys = this._headers;
                    this._headers = this._selector;
                    this._selector = undefined;
                }

                if( !this._panel ){
                    if( this._selector ){

                    }else{
                        this._panel = $(this.tpl);
                        this._panel.hide().appendTo(document.body);
                    }
                }
                this.getHeader();
                this.getBody();
                this.getFooter();
 
                return this;
            }

        , getPanel:
            function( _udata ){
                if( typeof _udata != &#x27;undefined&#x27; ){
                    this.getPanel().html( _udata );
                }
                return this._panel;
            }

        , getHeader:
            function( _udata ){
                var _selector = this.getPanel().find(&#x27;div.UPContent &gt; div.hd&#x27;);
                if( typeof _udata != &#x27;undefined&#x27; ) this._headers = _udata;
                if( typeof this._headers != &#x27;undefined&#x27; ){
                    if( !_selector.length ){
                        this.getPanel().find(&#x27;div.UPContent &gt; div.bd&#x27;)
                            .before( _selector = $(&#x27;&lt;div class=&quot;hd&quot;&gt;弹出框&lt;/div&gt;&#x27;) );
                    }
                    _selector.html( this._headers );
                    this._headers = undefined;
                }
                return _selector;
            }

        , getBody:
            function( _udata ){
                var _selector = this.getPanel().find(&#x27;div.UPContent &gt; div.bd&#x27;);
                if( typeof _udata != &#x27;undefined&#x27; ) this._bodys = _udata;
                if( typeof this._bodys!= &#x27;undefined&#x27; ){
                    _selector.html( this._bodys);
                    this._bodys = undefined;
                }
                return _selector;
            }


        , getFooter:
            function( _udata ){
                var _selector = this.getPanel().find(&#x27;div.UPContent &gt; div.ft&#x27;);
                if( typeof _udata != &#x27;undefined&#x27; ) this._footers = _udata;
                if( typeof this._footers != &#x27;undefined&#x27; ){
                    if( !_selector.length ){
                        this.getPanel().find(&#x27;div.UPContent &gt; div.bd&#x27;)
                            .after( _selector = $(&#x27;&lt;div class=&quot;ft&quot; &gt;&lt;/div&gt;&#x27;));
                    }
                    _selector.html( this._footers );
                    this._footers = undefined;
                }
                return _selector;
            }


    };
    
    function View( _model )
    {
        this._model = _model;

        this._init();
    }
    
    View.prototype = 
    {
        _init:
            function()
            {
                return this;
            }

        , show:
            function(){
                this._model.getPanel().show();
            }

        , hide:
            function(){
                this._model.getPanel().hide();
            }

        , close:
            function(){
                this._model.getPanel().remove();
            }

        , center:
            function( _with ){
                _with &amp;&amp; ( _with = $(_with) );
                var _layout = this._model.getPanel(), _lw = _layout.width(), _lh = _layout.height()
                    , _x, _y, _winw = $(window).width(), _winh = $(window).height()
                    , _scrleft = $(document).scrollLeft(), _scrtop = $(document).scrollTop()
                    ;
                    _layout.css( {&#x27;left&#x27;: &#x27;-9999px&#x27;, &#x27;top&#x27;: &#x27;-9999px&#x27;} ).show();

                if( _with &amp;&amp; _with.length ){

                }else{
                    _x = (_winw - _lw) / 2 + _scrleft; 
                    _y = (_winh - _lh) / 2 + _scrtop;
                    if( (_winh - _lh  - 100) &gt; 300 ){
                        _y -= 100;
                    }
                    UXC.log( (_winh - _lh / 2 - 100) )

                    if( ( _y + _lh - _scrtop ) &gt; _winh ){
                        UXC.log(&#x27;y overflow&#x27;);
                        _y = _scrtop + _winh - _lh;

                    }

                    if( _y &lt; _scrtop || _y &lt; 0 ) _y = _scrtop;

                    _layout.css( {left: _x+&#x27;px&#x27;, top: _y+&#x27;px&#x27;} );

                    UXC.log( _lw, _lh, _winw, _winh );

                }
            }
    };

    var _deftpl =
        [
        &#x27;&lt;div class=&quot;UPanel&quot; style=&quot;width: 600px;&quot;&gt;\n&#x27;
        ,&#x27;    &lt;div class=&quot;UPContent&quot;&gt;\n&#x27;
        ,&#x27;        &lt;div class=&quot;bd&quot;&gt;&lt;/div&gt;\n&#x27;
        ,&#x27;        &lt;span class=&quot;close&quot; eventtype=&quot;close&quot;&gt;&lt;/span&gt;\n&#x27;
        ,&#x27;    &lt;/div&gt;&lt;!--end UPContent--&gt;\n&#x27;
        ,&#x27;&lt;/div&gt;&lt;!--end UPanel--&gt;\n&#x27;
        ].join(&#x27;&#x27;)

}(jQuery));

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
