(function(i){!window.UXC&&(window.UXC={log:function(){}});window.ZINDEX_COUNT=window.ZINDEX_COUNT||50001;window.Slider=UXC.Slider=j;function j(a){a&&(a=i(a));if(j.getInstance(a)){return j.getInstance(a)}j.getInstance(a,this);UXC.log("Slider constructor",new Date().getTime());this._model=new h(a);switch(this._model.direction()){case"vertical":this._view=new g(this._model,this);break;default:this._view=new f(this._model,this);break}this._init()}j.autoInit=true;j.init=function(a){var b=[];a&&(a=i(a));if(a&&a.length){if(j.isSlider(a)){if(j.getInstance(a)){return[j.getInstance(a)]}b.push(new j(a))}else{a.find("div.js_autoSlider, dl.js_autoSlider, ul.js_autoSlider, ol.js_autoSlider").each(function(){if(j.isSlider(this)){if(j.getInstance(i(this))){b.push(j.getInstance(i(this)));return}b.push(new j(i(this)))}})}}return b};j.getInstance=function(b,a){a&&b&&i(b).data("SliderIns",a);return b?i(b).data("SliderIns"):null};j.isSlider=function(a){a&&(a=i(a));return a&&(a.is("[sliderwidth]")||a.is("[sliderheight]"))};j.prototype={_init:function(){var a=this;a._initControl();a.on("cleartinterval",function(){a._model.clearInterval();a._view.setPagePosition()});a.on("cleartimeout",function(){a._model.clearTimeout()});a._initAutoMove();a._model.initedcb()&&a.on("inited",a._model.initedcb());a.trigger("inited");return this},on:function(a,b){i(this).on(a,b);return this},trigger:function(a){i(this).trigger(a);return this},move:function(a){this._view.move(a);return this},moveTo:function(a){this._view.moveTo(a);return this},totalpage:function(){return this._model.totalpage()},pointer:function(){return this._model.pointer()},page:function(a){return this._model.page(a)},layout:function(){return this._model.layout()},find:function(a){return this._model.layout().find(a)},_initControl:function(){switch(this._model.direction()){case"vertical":this._initVerticalControl();break;default:this._initHorizontalControl();break}},_initHorizontalControl:function(){var a=this;a._model.leftbutton()&&a._model.leftbutton().on("click",function(b){a.trigger("cleartimeout");a.trigger("movetoleft");a._view.move(1)}).on("mouseenter",function(){a.trigger("controlover")}).on("mouseleave",function(){a.trigger("controlout")});a._model.rightbutton()&&a._model.rightbutton().on("click",function(b){a.trigger("cleartimeout");a.trigger("movetoright");a._view.move()}).on("mouseenter",function(){a.trigger("controlover")}).on("mouseleave",function(){a.trigger("controlout")})},_initVerticalControl:function(){var a=this},_initAutoMove:function(){var a=this;if(!a._model.automove()){return}a.on("beforemove",function(d,b,c){a.trigger("cleartimeout")});a.on("movedone",function(d,b,c){if(a._model.controlover()){return}a.trigger("automove")});a._model.layout().on("mouseenter",function(b){a.trigger("cleartimeout");a.trigger("mouseenter")});a._model.layout().on("mouseleave",function(b){a.trigger("cleartimeout");a.trigger("mouseleave");a._view.setPagePosition();a.trigger("automove")});a.on("controlover",function(){a.trigger("cleartimeout");a._model.controlover(true)});a.on("controlout",function(){a.trigger("automove");a._model.controlover(false)});a.on("movetoleft",function(){a._model.moveDirection(false)});a.on("movetoright",function(){a._model.moveDirection(true)});i(a).on("automove",function(){a._model.timeout(setTimeout(function(){a._view.moveTo(a._model.automoveNewPointer())},a._model.automovems()))});a.trigger("automove");return this}};function h(a){this._layout=a;this._moveDirection=true;this._interval;this._timeout;this._init()}h.prototype={_init:function(){this.subitems();this.totalpage();UXC.log(printf("w:{0}, h:{1}, iw:{2}, ih:{3}, dr:{4}, si:{6}, hi:{5}, totalpage:{7}",this.width(),this.height(),this.itemwidth(),this.itemheight(),this.direction(),this.howmanyitem(),this.subitems().length,this.totalpage()));return this},layout:function(){return this._layout},leftbutton:function(){return this._layout.is("[sliderleft]")?i(this._layout.attr("sliderleft")):null},rightbutton:function(){return this._layout.is("[sliderright]")?i(this._layout.attr("sliderright")):null},direction:function(){return this._layout.attr("sliderdirection").toLowerCase()||"horizontal"},moveDirection:function(a){typeof a!="undefined"&&(this._moveDirection=a);UXC.log("moveDirection",this._moveDirection);return this._moveDirection},howmanyitem:function(){return parseInt(this._layout.attr("sliderhowmanyitem"),10)||1},width:function(){return parseInt(this._layout.attr("sliderwidth"),10)||800},height:function(){return parseInt(this._layout.attr("sliderheight"),10)||230},itemwidth:function(){return parseInt(this._layout.attr("slideritemwidth"),10)||160},itemheight:function(){return parseInt(this._layout.attr("slideritemheight"),10)||230},loop:function(){return parseBool(this._layout.attr("sliderloop"))},stepms:function(){return parseInt(this._layout.attr("sliderstepms"),10)||10},durationms:function(){return parseInt(this._layout.attr("sliderdurationms"),10)||300},automovems:function(){return parseInt(this._layout.attr("sliderautomovems"),10)||2000},automove:function(){return parseBool(this._layout.attr("sliderautomove"))},defaultpage:function(){return parseInt(this._layout.attr("sliderdefaultpage"),10)||0},subitems:function(){if(this._layout.is("[slidersubitems]")){this._subitems=this._layout.find(this._layout.attr("slidersubitems"))}else{this._subitems=this._layout.children()}return this._subitems},totalpage:function(){this.subitems();if(this.howmanyitem()>1){this._totalpage=Math.ceil(this._subitems.length/this.howmanyitem())}else{this._totalpage=this._subitems.length}return this._totalpage},page:function(a){this.subitems();!a&&(a=0);a<0&&(a=0);a>=this.totalpage()&&(a=this.totalpage()-1);a*=this.howmanyitem();var b=[];for(var d=a,c=0;c<this.howmanyitem()&&d<this._subitems.length;d++,c++){b.push(i(this._subitems[d]))}return b},pointer:function(a){if(typeof this._pointer=="undefined"){this._pointer=this.defaultpage()}if(typeof a!="undefined"){this._pointer=this.fixpointer(a)}return this._pointer},newpointer:function(b){var a=this.pointer();b&&a--;!b&&a++;a=this.fixpointer(a);return a},fixpointer:function(b){var a=b;if(this.loop()){a<0&&(a=this.totalpage()-1);a>=this.totalpage()&&(a=0)}else{a<0&&(a=0);a>=this.totalpage()&&(a=this.totalpage()-1)}return a},automoveNewPointer:function(){var a=this.pointer();if(this.moveDirection()){a++}else{a--}if(this.loop()){if(a>=this.totalpage()){a=0}else{if(a<0){a=this.totalpage()-1}}}else{if(a>=this.totalpage()){a=this.totalpage()-2;this.moveDirection(false)}else{if(a<0){a=1;this.moveDirection(true)}}}return a},interval:function(a){typeof a!="undefined"&&(this._interval=a);return this._interval},clearInterval:function(){this.interval()&&clearInterval(this.interval())},timeout:function(a){typeof a!="undefined"&&(this._timeout=a);return this._timeout},clearTimeout:function(){this.timeout()&&clearTimeout(this.timeout())},controlover:function(a){typeof a!="undefined"&&(this._controlover=a);return this._controlover},initedcb:function(){this._layout.is("[sliderinitedcb]")&&window[this._layout.attr("sliderinitedcb")]&&(this._initedcb=window[this._layout.attr("sliderinitedcb")]);return this._initedcb}};function f(b,a){this._model=b;this._slider=a;this._itemspace=(this._model.width()-Math.floor(this._model.width()/this._model.itemwidth())*this._model.itemwidth())/(this._model.totalpage()-1);this._itemspace=parseInt(this._itemspace);this._init()}f.prototype={_init:function(){this.setPagePosition(this._model.pointer());return this},move:function(a){var c=this;a=!!a;UXC.log("HorizontalView move, is backwrad",a,this._model.pointer());var b=this._model.newpointer(a);UXC.log(printf("is backwrad: {0}, pointer:{1}, new pointer:{2}",a,this._model.pointer(),b));this.moveTo(b)},moveTo:function(c){var l=this;if(!this._model.loop()){if(c<=this._model.pointer()&&this._model.pointer()===0){i(this._slider).trigger("outmin");return}if(c>=this._model.pointer()&&this._model.pointer()>=this._model.totalpage()-1){i(this._slider).trigger("outmax");return}}c=this._model.fixpointer(c);var a=this._model.pointer();if(c===a){return}var b=this._model.page(a),d=this._model.page(c);var e=b.concat(d);this._setNewPagePosition(b,d,a,c);l._model.pointer(c)},_setNewPagePosition:function(a,e,b,c){var o=this,p,n=a.concat(e),d;i(this._slider).trigger("cleartinterval");if(b<c){p=this._model.width()+this._itemspace}else{p=-(this._model.width()+this._itemspace);d=true}b===(o._model.totalpage()-1)&&c===0&&(p=this._model.width()+this._itemspace,d=false);b===0&&c===(o._model.totalpage()-1)&&(p=-(this._model.width()+this._itemspace),d=true);i.each(e,function(k,l){var m=i(l);m.css({left:p+o._model.itemwidth()*k+o._itemspace*k+"px"});m.show()});i(o._slider).trigger("beforemove",[b,c]);i.each(n,function(k,l){l.data("TMP_LEFT",l.prop("offsetLeft"))});UXC.log("zzzzzzzzzz",p,this._itemspace,this._model.moveDirection());o._model.interval(easyEffect(function(l,k){i(n).each(function(m,r){r.css({left:r.data("TMP_LEFT")+(d?l:-l)+"px"})});if(k){i(a).each(function(m,r){r.hide()});i(o._slider).trigger("movedone",[b,c]);o._model.pointer(c);o.setPagePosition()}},this._model.width(),0,this._model.durationms(),this._model.stepms()))},setPagePosition:function(a){UXC.log("view setPagePosition",new Date().getTime());typeof a=="undefined"&&(a=this._model.pointer());this._model.subitems().hide();var b=this._model.page(a);for(var c=0,d=b.length;c<d;c++){b[c].css({left:c*this._model.itemwidth()+c*this._itemspace+"px"}).show()}UXC.log(b.length)}};function g(b,a){this._model=b;this._slider=a;this._itemspace=0;this._init()}g.prototype={_init:function(){this.setPagePosition(this._model.pointer());return this},move:function(a){var b=this;return this},moveTo:function(a){var b=this;return this},_setNewPagePosition:function(a,e,b,c){var o=this,p,n=a.concat(e),d;return this},setPagePosition:function(a){var b=this;UXC.log("view setPagePosition",new Date().getTime());return this}};i(document).ready(function(){if(!j.autoInit){return}j.init(document.body)})}(jQuery));