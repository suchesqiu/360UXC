(function(f){!window.UXC&&(window.UXC={log:function(){}});window.ZINDEX_COUNT=window.ZINDEX_COUNT||50001;window.Slider=UXC.Slider=g;function g(a){a&&(a=f(a));if(g.getInstance(a)){return g.getInstance(a)}g.getInstance(a,this);UXC.log("Slider constructor",new Date().getTime());this._model=new j(a);switch(this._model.direction()){case"vertical":this._view=new i(this._model,this);break;default:this._view=new h(this._model,this);break}this._init()}g.autoInit=true;g.init=function(a){var b=[];a&&(a=f(a));if(a&&a.length){if(g.isSlider(a)){if(g.getInstance(a)){return[g.getInstance(a)]}b.push(new g(a))}else{a.find("div.js_autoSlider, dl.js_autoSlider, ul.js_autoSlider, ol.js_autoSlider").each(function(){if(g.isSlider(this)){if(g.getInstance(f(this))){b.push(g.getInstance(f(this)));return}b.push(new g(f(this)))}})}}return b};g.getInstance=function(b,a){a&&b&&f(b).data("SliderIns",a);return b?f(b).data("SliderIns"):null};g.isSlider=function(a){a&&(a=f(a));return a&&(a.is("[sliderwidth]")||a.is("[sliderheight]"))};g.prototype={_init:function(){var a=this;a._initControl();a.on("cleartinterval",function(){a._model.clearInterval();a._view.setPagePosition()});a.on("cleartimeout",function(){a._model.clearTimeout()});a._initAutoMove();a._model.initedcb()&&a.on("inited",a._model.initedcb());a.trigger("inited");return this},on:function(a,b){f(this).on(a,b);return this},trigger:function(a){f(this).trigger(a);return this},move:function(a){this._view.move(a);return this},moveTo:function(a){this._view.moveTo(a);return this},totalpage:function(){return this._model.totalpage()},pointer:function(){return this._model.pointer()},page:function(a){return this._model.page(a)},layout:function(){return this._model.layout()},find:function(a){return this._model.layout().find(a)},_initControl:function(){switch(this._model.direction()){case"vertical":this._initVerticalControl();break;default:this._initHorizontalControl();break}},_initHorizontalControl:function(){var a=this;a._model.leftbutton()&&a._model.leftbutton().on("click",function(b){a.trigger("cleartimeout");a.trigger("movetoleft");a._view.move(1)}).on("mouseenter",function(){a.trigger("controlover")}).on("mouseleave",function(){a.trigger("controlout")});a._model.rightbutton()&&a._model.rightbutton().on("click",function(b){a.trigger("cleartimeout");a.trigger("movetoright");a._view.move()}).on("mouseenter",function(){a.trigger("controlover")}).on("mouseleave",function(){a.trigger("controlout")})},_initVerticalControl:function(){var a=this},_initAutoMove:function(){var a=this;if(!a._model.automove()){return}a.on("beforemove",function(c,d,b){a.trigger("cleartimeout")});a.on("movedone",function(c,d,b){if(a._model.controlover()){return}a.trigger("automove")});a._model.layout().on("mouseenter",function(b){a.trigger("cleartimeout");a.trigger("mouseenter")});a._model.layout().on("mouseleave",function(b){a.trigger("cleartimeout");a.trigger("mouseleave");a._view.setPagePosition();a.trigger("automove")});a.on("controlover",function(){a.trigger("cleartimeout");a._model.controlover(true)});a.on("controlout",function(){a.trigger("automove");a._model.controlover(false)});a.on("movetoleft",function(){a._model.moveDirection(false)});a.on("movetoright",function(){a._model.moveDirection(true)});f(a).on("automove",function(){a._model.timeout(setTimeout(function(){a._view.moveTo(a._model.automoveNewPointer())},a._model.automovems()))});a.trigger("automove");return this}};function j(a){this._layout=a;this._moveDirection=true;this._interval;this._timeout;this._init()}j.prototype={_init:function(){this.subitems();this.totalpage();UXC.log(printf("w:{0}, h:{1}, iw:{2}, ih:{3}, dr:{4}, si:{6}, hi:{5}, totalpage:{7}",this.width(),this.height(),this.itemwidth(),this.itemheight(),this.direction(),this.howmanyitem(),this.subitems().length,this.totalpage()));return this},layout:function(){return this._layout},leftbutton:function(){return this._layout.is("[sliderleft]")?f(this._layout.attr("sliderleft")):null},rightbutton:function(){return this._layout.is("[sliderright]")?f(this._layout.attr("sliderright")):null},direction:function(){return this._layout.attr("sliderdirection").toLowerCase()||"horizontal"},moveDirection:function(a){typeof a!="undefined"&&(this._moveDirection=a);UXC.log("moveDirection",this._moveDirection);return this._moveDirection},howmanyitem:function(){return parseInt(this._layout.attr("sliderhowmanyitem"),10)||1},width:function(){return parseInt(this._layout.attr("sliderwidth"),10)||800},height:function(){return parseInt(this._layout.attr("sliderheight"),10)||230},itemwidth:function(){return parseInt(this._layout.attr("slideritemwidth"),10)||160},itemheight:function(){return parseInt(this._layout.attr("slideritemheight"),10)||230},loop:function(){return parseBool(this._layout.attr("sliderloop"))},stepms:function(){return parseInt(this._layout.attr("sliderstepms"),10)||10},durationms:function(){return parseInt(this._layout.attr("sliderdurationms"),10)||300},automovems:function(){return parseInt(this._layout.attr("sliderautomovems"),10)||2000},automove:function(){return parseBool(this._layout.attr("sliderautomove"))},defaultpage:function(){return parseInt(this._layout.attr("sliderdefaultpage"),10)||0},subitems:function(){if(this._layout.is("[slidersubitems]")){this._subitems=this._layout.find(this._layout.attr("slidersubitems"))}else{this._subitems=this._layout.children()}return this._subitems},totalpage:function(){this.subitems();if(this.howmanyitem()>1){this._totalpage=Math.ceil(this._subitems.length/this.howmanyitem())}else{this._totalpage=this._subitems.length}return this._totalpage},page:function(c){this.subitems();!c&&(c=0);c<0&&(c=0);c>=this.totalpage()&&(c=this.totalpage()-1);c*=this.howmanyitem();var d=[];for(var b=c,a=0;a<this.howmanyitem()&&b<this._subitems.length;b++,a++){d.push(f(this._subitems[b]))}return d},pointer:function(a){if(typeof this._pointer=="undefined"){this._pointer=this.defaultpage()}if(typeof a!="undefined"){this._pointer=this.fixpointer(a)}return this._pointer},newpointer:function(b){var a=this.pointer();b&&a--;!b&&a++;a=this.fixpointer(a);return a},fixpointer:function(b){var a=b;if(this.loop()){a<0&&(a=this.totalpage()-1);a>=this.totalpage()&&(a=0)}else{a<0&&(a=0);a>=this.totalpage()&&(a=this.totalpage()-1)}return a},automoveNewPointer:function(){var a=this.pointer();if(this.moveDirection()){a++}else{a--}if(this.loop()){if(a>=this.totalpage()){a=0}else{if(a<0){a=this.totalpage()-1}}}else{if(a>=this.totalpage()){a=this.totalpage()-2;this.moveDirection(false)}else{if(a<0){a=1;this.moveDirection(true)}}}return a},interval:function(a){typeof a!="undefined"&&(this._interval=a);return this._interval},clearInterval:function(){this.interval()&&clearInterval(this.interval())},timeout:function(a){typeof a!="undefined"&&(this._timeout=a);return this._timeout},clearTimeout:function(){this.timeout()&&clearTimeout(this.timeout())},controlover:function(a){typeof a!="undefined"&&(this._controlover=a);return this._controlover},initedcb:function(){this._layout.is("[sliderinitedcb]")&&window[this._layout.attr("sliderinitedcb")]&&(this._initedcb=window[this._layout.attr("sliderinitedcb")]);return this._initedcb}};function h(b,a){this._model=b;this._slider=a;this._itemspace=(this._model.width()-Math.floor(this._model.width()/this._model.itemwidth())*this._model.itemwidth())/(this._model.totalpage()-1);this._itemspace=parseInt(this._itemspace);this._init()}h.prototype={_init:function(){this.setPagePosition(this._model.pointer());return this},move:function(b){var a=this;b=!!b;UXC.log("HorizontalView move, is backwrad",b,this._model.pointer());var c=this._model.newpointer(b);UXC.log(printf("is backwrad: {0}, pointer:{1}, new pointer:{2}",b,this._model.pointer(),c));this.moveTo(c)},moveTo:function(a){var d=this;if(!this._model.loop()){if(a<=this._model.pointer()&&this._model.pointer()===0){f(this._slider).trigger("outmin");return}if(a>=this._model.pointer()&&this._model.pointer()>=this._model.totalpage()-1){f(this._slider).trigger("outmax");return}}a=this._model.fixpointer(a);var e=this._model.pointer();if(a===e){return}var l=this._model.page(e),b=this._model.page(a);var c=l.concat(b);this._setNewPagePosition(l,b,e,a);d._model.pointer(a)},_setNewPagePosition:function(o,e,p,a){var c=this,n,b=o.concat(e),d;f(this._slider).trigger("cleartinterval");if(p<a){n=this._model.width()+this._itemspace}else{n=-(this._model.width()+this._itemspace);d=true}p===(c._model.totalpage()-1)&&a===0&&(n=this._model.width()+this._itemspace,d=false);p===0&&a===(c._model.totalpage()-1)&&(n=-(this._model.width()+this._itemspace),d=true);f.each(e,function(k,l){var m=f(l);m.css({left:n+c._model.itemwidth()*k+c._itemspace*k+"px"});m.show()});f(c._slider).trigger("beforemove",[p,a]);f.each(b,function(k,l){l.data("TMP_LEFT",l.prop("offsetLeft"))});UXC.log("zzzzzzzzzz",n,this._itemspace,this._model.moveDirection());c._model.interval(easyEffect(function(l,k){f(b).each(function(r,m){m.css({left:m.data("TMP_LEFT")+(d?l:-l)+"px"})});if(k){f(o).each(function(r,m){m.hide()});f(c._slider).trigger("movedone",[p,a]);c._model.pointer(a);c.setPagePosition()}},this._model.width(),0,this._model.durationms(),this._model.stepms()))},setPagePosition:function(c){UXC.log("view setPagePosition",new Date().getTime());typeof c=="undefined"&&(c=this._model.pointer());this._model.subitems().hide();var d=this._model.page(c);for(var a=0,b=d.length;a<b;a++){d[a].css({left:a*this._model.itemwidth()+a*this._itemspace+"px"}).show()}UXC.log(d.length)}};function i(b,a){this._model=b;this._slider=a;this._itemspace=0;this._init()}i.prototype={_init:function(){this.setPagePosition(this._model.pointer());return this},move:function(a){var b=this;return this},moveTo:function(a){var b=this;return this},_setNewPagePosition:function(o,e,p,a){var c=this,n,b=o.concat(e),d;return this},setPagePosition:function(a){var b=this;UXC.log("view setPagePosition",new Date().getTime());return this}};f(document).ready(function(){if(!g.autoInit){return}g.init(document.body)})}(jQuery));