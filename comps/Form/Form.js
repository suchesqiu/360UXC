(function(b){!window.UXC&&(window.UXC={log:function(){}});window.UXCForm=UXC.Form={disableButton:function(d,a){if(!d){return}d=b(d);a=a||1000;d.attr("disabled",true);setTimeout(function(){d.attr("disabled",false)},a)}}}(jQuery));(function(f){UXC.Form.initCheckAll=function(b){b=f(b);var a=b.find("input[type=checkbox][checktype][checkfor]");a.each(function(){var j=f(this),i=j.attr("checktype").toLowerCase(),c=j.attr("checkfor");if(i!="all"||!c){return}d(j,c);if(!j.data("initedCheckall")){j.data("initedCheckall",true);f(document).delegate(c,"click",function(g){var h=f(this);if(e(h)){return}d(j,c)})}})};f(document).ready(function(a){UXC.Form.initCheckAll(f(document))});f(document).delegate("input[type=checkbox][checktype][checkfor]","click",function(c){var h=f(this),b=h.attr("checktype").toLowerCase(),a=h.attr("checkfor");UXC.log(b,a);switch(b){case"all":f(a).each(function(){var g=f(this);if(e(g)){return}h.prop("checked")&&g.prop("checked",true);!h.prop("checked")&&g.prop("checked",false)});break;case"inverse":f(a).each(function(){var g=f(this);if(e(g)){return}if(g.prop("checked")){g.prop("checked",false)}else{g.prop("checked",true)}});if(h.is("[checkall]")){d(h.attr("checkall"),a)}break}});function e(a){a=f(a);return a.is("[checktype]")&&a.is("[checkfor]")}function d(a,c){var b=true,a=f(a),c=f(c);c.each(function(){var h=f(this);if(h.is("[checktype]")||h.is("[checkfor]")){return}if(!h.prop("checked")){return b=false}});UXC.log("_isAll: ",b);a&&a.length&&a.prop("checked",b)}}(jQuery));(function(m){UXC.Form.initAutoSelect=i;function i(b){var a=[];b&&(b=m(b));if(i.isSelect(b)){a.push(new n(b))}else{if(b&&b.length){b.find("select[defaultselect]").each(function(){a.push(new n(m(this)))})}}return a}var j={isSelect:function(b){var a;b&&(b=m(b))&&b.is("select")&&b.is("[defaultselect]")&&(a=true);return a},hideEmpty:false,dataFilter:null,beforeInited:null,inited:null,change:null,allChanged:null,triggerInitChange:true,randomurl:false,processUrl:null,getInstance:function(b,a){var c;b&&(b=m(b))&&(typeof a!="undefined"&&b.data("SelectIns",a),c=b.data("SelectIns"));return c}};for(var h in j){i[h]=j[h]}function n(a){this._model=new k(a);this._view=new l(this._model,this);this._init()}n.prototype={_init:function(){var a=this;m.each(a._model.items(),function(b,c){i.getInstance(m(c),a)});a._model.beforeInited()&&a.on("SelectBeforeInited",a._model.beforeInited());a.on("SelectInited",function(){var b=a._model.first();while(a._model.next(b)){b.on("change",a._responeChange);b=a._model.next(b)}a._model.isInited(true);a._model.inited()&&a._model.inited().call(a)});a.on("SelectChange",function(b,c){a._model.change(c)&&a._model.change(c).call(c,b,a)});a._model.allChanged()&&a.on("SelectAllChanged",a._model.allChanged());a.trigger("SelectBeforeInited");a._update(a._model.first(),a._firstInitCb);return a},on:function(b,a){m(this).on(b,a);return this},trigger:function(a,b){m(this).trigger(a,b);return this},first:function(){return this._model.first()},last:function(){return this._model.last()},items:function(){return this._model.items()},isFirst:function(a){return this._model.isFirst(a)},isLast:function(a){return this._model.isLast(a)},isInited:function(){return this._model.isInited()},data:function(a){return this._model.data(a)},_responeChange:function(b){var c=m(this),d=i.getInstance(c),a=d._model.next(c);UXC.log("_responeChange:",c.attr("name"),c.val());if(!(a&&a.length)){d.trigger("SelectChange")}else{d._update(a,d._changeCb,c.val())}},_changeCb:function(c,a){var d=this,b=d._model.next(c);d.trigger("SelectChange",[c]);if(d._model.isLast(c)){d.trigger("SelectAllChanged")}if(b&&b.length){UXC.log("_changeCb:",c.val(),b.attr("name"),c.attr("name"));d._update(b,d._firstInitCb,c.val())}return this},_firstInitCb:function(c,a){var d=this,b=d._model.next(c);d._model.triggerInitChange()&&(UXC.log("triggerInitChange",c.attr("name")),c.trigger("change"));d.trigger("SelectChange",[c]);if(d._model.isLast(c)){d.trigger("SelectAllChanged");d.trigger("SelectInited")}if(b&&b.length){UXC.log("_firstInitCb:",c.val(),b.attr("name"),c.attr("name"));d._update(b,d._firstInitCb,c.val())}return this},_update:function(b,c,a){if(this._model.isStatic(b)){this._updateStatic(b,c,a)}else{if(this._model.isAjax(b)){this._updateAjax(b,c,a)}else{this._updateNormal(b,c,a)}}return this},_updateStatic:function(e,b,d){var a=this,c;UXC.log("static select");if(a._model.isFirst(e)){typeof d=="undefined"&&(d=a._model.selectparentid(e)||"");if(typeof d!="undefined"){c=a._model.datacb(e)(d)}}else{c=a._model.datacb(e)(d)}a._view.update(e,c);b&&b.call(a,e,c);return this},_updateAjax:function(f,a,d){var g=this,b,e=g._model.next(f),c;UXC.log("ajax select");if(g._model.isFirst(f)){typeof d=="undefined"&&(d=g._model.selectparentid(f)||"");if(typeof d!="undefined"){c=g._model.selecturl(f,d);m.get(c,function(p){p=m.parseJSON(p);g._view.update(f,p);a&&a.call(g,f,p)})}}else{c=g._model.selecturl(f,d);m.get(c,function(p){UXC.log("_url:",c,d);p=m.parseJSON(p);g._view.update(f,p);a&&a.call(g,f,p)})}return this},_updateNormal:function(a,c,e){var b=this,d;UXC.log("normal select");if(b._model.isFirst(a)){var f=b._model.next(a);if(f&&f.length){b._update(f,c,a.val());return this}}else{d=b._model.datacb(a)(e)}b._view.update(a,d);c&&c.call(b,a,d);return this}};function k(a){this._selector=a;this._items=[];this._isInited=false;this._init()}k.prototype={_init:function(){this._findAllItems(this._selector);UXC.log("select items.length:",this._items.length);this._initRelationship();return this},_findAllItems:function(a){this._items.push(a);if(a.is("[selecttarget]")){this._findAllItems(m(a.attr("selecttarget")))}},_initRelationship:function(){this._selector.data("FirstSelect",true);if(this._items.length>1){this._items[this._items.length-1].data("LastSelect",true);for(var b=0;b<this._items.length;b++){var a=this._items[b],c=this._items[b-1];if(c){a.data("PrevSelect",c);c.data("NextSelect",a)}}}},items:function(){return this._items},first:function(){return this._items[0]},last:function(){return this._items[this._items-1]},next:function(a){return a.data("NextSelect")},prev:function(a){return a.data("PrevSelect")},isFirst:function(a){return !!a.data("FirstSelect")},isLast:function(a){return !!a.data("LastSelect")},isStatic:function(a){return a.is("[selectdatacb]")},isAjax:function(a){return a.is("[selecturl]")},isInited:function(a){typeof a!="undefined"&&(this._isInited=a);return this._isInited},datacb:function(b){var a;b.attr("selectdatacb")&&(a=window[b.attr("selectdatacb")]);return a},selectparentid:function(b){var a;b.attr("selectparentid")&&(a=b.attr("selectparentid"));b.removeAttr("selectparentid");return a||""},selectvalue:function(b){var a=b.attr("selectvalue");b.removeAttr("selectvalue");return a||""},randomurl:function(b){var a=i.randomurl;b.is("[selectrandomurl]")&&(a=parseBool(b.attr("selectrandomurl")));return a},triggerInitChange:function(){var a=i.triggerInitChange,b=this.first();b.attr("selecttriggerinitchange")&&(a=parseBool(b.attr("selecttriggerinitchange")));return a},hideempty:function(b){var a=i.hideEmpty;b&&b.length&&b.is("[selecthideempty]")&&(a=parseBool(b.attr("selecthideempty")));return a},selecturl:function(d,c){var b=i.processUrl,a=d.attr("selecturl")||"";d.attr("selectprocessurl")&&window[d.attr("selectprocessurl")]&&(b=window[d.attr("selectprocessurl")]);a=printf(a,c);this.randomurl(d)&&(a=add_url_params(a,{rnd:new Date().getTime()}));b&&(a=b.call(d,a,c));return a},_userdatafilter:function(b){var a;b.attr("selectdatafilter")&&(a=window[b.attr("selectdatafilter")]);return a},dataFilter:function(b,c){var a=this._userdatafilter(b)||i.dataFilter;a&&(c=a(c));return c},beforeInited:function(){var a=i.beforeInited,b=this.first();b.attr("selectbeforeInited")&&window[b.attr("selectbeforeInited")]&&(a=window[b.attr("selectbeforeinited")]);return a},inited:function(){var a=i.inited,b=this.first();b.attr("selectinited")&&window[b.attr("selectinited")]&&(a=window[b.attr("selectinited")]);return a},change:function(b){var a=i.change;b.attr("selectchange")&&window[b.attr("selectchange")]&&(a=window[b.attr("selectchange")]);return a},allChanged:function(){var a=i.allChanged,b=this.first();b.attr("selectallchanged")&&window[b.attr("selectallchanged")]&&(a=window[b.attr("selectallchanged")]);return a},data:function(b,a){typeof a!="undefined"&&(b.data("SelectData",a));return b.data("SelectData")},hasVal:function(b,c){var a=false,c=c.toString();b.find("option").each(function(){var d=m(this);if(d.val()==c){a=true;return false}});return a}};function l(a,b){this._model=a;this._control=b;this._init()}l.prototype={_init:function(){return this},update:function(d,f){var a=this._model.selectvalue(d);f=this._model.dataFilter(d,f);this._model.data(d,f);this._control.trigger("SelectItemBeforeUpdate",[d,f]);this._removeExists(d);if(!f.length){if(this._model.hideempty(d)){d.hide();this._control.trigger("SelectItemUpdated",[d,f]);return}}else{!d.is(":visible")&&d.show()}var c=[],g,e;for(var p=0,b=f.length;p<b;p++){g=f[p];c.push(printf('<option value="{0}" {2}>{1}</option>',g[0],g[1],e))}m(c.join("")).appendTo(d);if(this._model.hasVal(d,a)){d.val(a)}this._control.trigger("SelectItemUpdated",[d,f])},_removeExists:function(a){a.find("> option:not([defaultoption])").remove()}};m(document).ready(function(a){setTimeout(function(){i(document.body)},100)})}(jQuery));(function(e){UXC.Form.initAutoFill=function(b,a){if(!(b&&b.length)){b=e(document)}a=a||location.href;UXC.log("UXC.Form.initAutoFill");b.find("form.js_autoFillUrlForm").each(function(){var c=e(this);c.find("input[type=text][name],input[type=password][name],textarea[name]").each(function(){var h=e(this);if(has_url_param(a,h.attr("name"))){h.val(d(get_url_param(a,h.attr("name")).replace(/[\+]/g," ")))}});c.find("select[name]").each(function(){var j=e(this),i=d(get_url_param(a,j.attr("name")).replace(/[\+]/g," "));if(has_url_param(a,j.attr("name"))){if(f(j,i)){j.val(get_url_param(a,j.attr("name")))}else{j.attr("selectvalue",i)}}})})};e(document).ready(function(a){UXC.Form.initAutoFill()});UXC.Form.initAutoFill.decodeFunc;function d(a){try{a=(UXC.Form.initAutoFill.decodeFunc||decodeURIComponent)(a)}catch(b){}return a}function f(b,c){var a=false,c=c.toString();b.find("option").each(function(){var h=e(this);if(h.val()==c){a=true;return false}});return a}}(jQuery));(function(d){UXC.Form.initNumericStepper=function(a){a&&(a=d(a));a.delegate(".js_NStepperPlus, .js_NStepperMinus","click",function(q){var l=d(this),p=c.target(l);if(!(p&&p.length)){return}var r=parseInt(c.fixed(p),10)||0;var n=d.trim(p.val()),o=c.step(p);n=(r?parseFloat(n):parseInt(n,10))||0;var m=c.minvalue(p),b=c.maxvalue(p);l.hasClass("js_NStepperPlus")&&(n+=o);l.hasClass("js_NStepperMinus")&&(n-=o);n<m&&(n=m);n>b&&(n=b);UXC.log(m,b,n,r,o);p.val(n.toFixed(r));c.callback(p)&&c.callback(p).call(p,l)})};UXC.Form.initNumericStepper.onchange;var c={target:function(a){var b;if(a.attr("nstarget")){if(/^\~/.test(a.attr("nstarget"))){b=a.parent().find(a.attr("nstarget").replace(/^\~[\s]*/g,""));!(b&&b.length)&&(b=d(a.attr("nstarget")))}else{b=d(a.attr("nstarget"))}}return b},fixed:function(a){return a.attr("nsfixed")},step:function(a){return parseFloat(a.attr("nsstep"))||1},minvalue:function(a){return parseFloat(a.attr("nsminvalue")||a.attr("minvalue"))||0},maxvalue:function(a){return parseFloat(a.attr("nsmaxvalue")||a.attr("maxvalue"))||100},callback:function(b){var f=UXC.Form.initNumericStepper.onchange,a;b.attr("nschangecallback")&&(a=window[b.attr("nschangecallback")])&&(f=a);return f}};d(document).ready(function(a){UXC.Form.initNumericStepper(d(document))})}(jQuery));