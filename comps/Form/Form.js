(function(b){!window.UXC&&(window.UXC={log:function(){}});window.UXCForm=UXC.Form={disableButton:function(d,a){if(!d){return}d=b(d);a=a||1000;d.attr("disabled",true);setTimeout(function(){d.attr("disabled",false)},a)}}}(jQuery));(function(e){UXC.Form.initCheckAll=function(b){b=e(b);var a=b.find("input[type=checkbox][checktype][checkfor]");a.each(function(){var j=e(this),i=j.attr("checktype").toLowerCase(),c=j.attr("checkfor");if(i!="all"||!c){return}f(j,c);if(!j.data("initedCheckall")){j.data("initedCheckall",true);e(document).delegate(c,"click",function(g){var h=e(this);if(d(h)){return}f(j,c)})}})};e(document).ready(function(a){UXC.Form.initCheckAll(e(document))});e(document).delegate("input[type=checkbox][checktype][checkfor]","click",function(c){var h=e(this),b=h.attr("checktype").toLowerCase(),a=h.attr("checkfor");UXC.log(b,a);switch(b){case"all":e(a).each(function(){var g=e(this);if(d(g)){return}h.prop("checked")&&g.prop("checked",true);!h.prop("checked")&&g.prop("checked",false)});break;case"inverse":e(a).each(function(){var g=e(this);if(d(g)){return}if(g.prop("checked")){g.prop("checked",false)}else{g.prop("checked",true)}});if(h.is("[checkall]")){f(h.attr("checkall"),a)}break}});function d(a){a=e(a);return a.is("[checktype]")&&a.is("[checkfor]")}function f(b,a){var c=true,b=e(b),a=e(a);a.each(function(){var h=e(this);if(h.is("[checktype]")||h.is("[checkfor]")){return}if(!h.prop("checked")){return c=false}});UXC.log("_isAll: ",c);b&&b.length&&b.prop("checked",c)}}(jQuery));(function(n){UXC.Form.initAutoSelect=j;function j(b){var a=[];b&&(b=n(b));if(j.isSelect(b)){a.push(new h(b))}else{if(b&&b.length){b.find("select[defaultselect]").each(function(){a.push(new h(n(this)))})}}return a}var k={isSelect:function(b){var a;b&&(b=n(b))&&b.is("select")&&b.is("[defaultselect]")&&(a=true);return a},hideEmpty:false,dataFilter:null,beforeInited:null,inited:null,change:null,allChanged:null,triggerInitChange:true,randomurl:false,processUrl:null,getInstance:function(c,b){var a;c&&(c=n(c))&&(typeof b!="undefined"&&c.data("SelectIns",b),a=c.data("SelectIns"));return a}};for(var i in k){j[i]=k[i]}function h(a){this._model=new l(a);this._view=new m(this._model,this);this._init()}h.prototype={_init:function(){var a=this;n.each(a._model.items(),function(b,c){j.getInstance(n(c),a)});a._model.beforeInited()&&a.on("SelectBeforeInited",a._model.beforeInited());a.on("SelectInited",function(){var b=a._model.first();while(a._model.next(b)){b.on("change",a._responeChange);b=a._model.next(b)}a._model.isInited(true);a._model.inited()&&a._model.inited().call(a)});a.on("SelectChange",function(b,c){a._model.change(c)&&a._model.change(c).call(c,b,a)});a._model.allChanged()&&a.on("SelectAllChanged",a._model.allChanged());a.trigger("SelectBeforeInited");a._update(a._model.first(),a._firstInitCb);return a},on:function(b,a){n(this).on(b,a);return this},trigger:function(a,b){n(this).trigger(a,b);return this},first:function(){return this._model.first()},last:function(){return this._model.last()},items:function(){return this._model.items()},isFirst:function(a){return this._model.isFirst(a)},isLast:function(a){return this._model.isLast(a)},isInited:function(){return this._model.isInited()},data:function(a){return this._model.data(a)},_responeChange:function(b){var c=n(this),d=j.getInstance(c),a=d._model.next(c);UXC.log("_responeChange:",c.attr("name"),c.val());if(!(a&&a.length)){d.trigger("SelectChange")}else{d._update(a,d._changeCb,c.val())}},_changeCb:function(c,a){var d=this,b=d._model.next(c);d.trigger("SelectChange",[c]);if(d._model.isLast(c)){d.trigger("SelectAllChanged")}if(b&&b.length){UXC.log("_changeCb:",c.val(),b.attr("name"),c.attr("name"));d._update(b,d._firstInitCb,c.val())}return this},_firstInitCb:function(c,a){var d=this,b=d._model.next(c);d._model.triggerInitChange()&&(UXC.log("triggerInitChange",c.attr("name")),c.trigger("change"));d.trigger("SelectChange",[c]);if(d._model.isLast(c)){d.trigger("SelectAllChanged");d.trigger("SelectInited")}if(b&&b.length){UXC.log("_firstInitCb:",c.val(),b.attr("name"),c.attr("name"));d._update(b,d._firstInitCb,c.val())}return this},_update:function(c,a,b){if(this._model.isStatic(c)){this._updateStatic(c,a,b)}else{if(this._model.isAjax(c)){this._updateAjax(c,a,b)}else{this._updateNormal(c,a,b)}}return this},_updateStatic:function(d,a,c){var e=this,b;UXC.log("static select");if(e._model.isFirst(d)){typeof c=="undefined"&&(c=e._model.selectparentid(d)||"");if(typeof c!="undefined"){b=e._model.datacb(d)(c)}}else{b=e._model.datacb(d)(c)}e._view.update(d,b);a&&a.call(e,d,b);return this},_updateAjax:function(e,g,c){var f=this,a,d=f._model.next(e),b;UXC.log("ajax select");if(f._model.isFirst(e)){typeof c=="undefined"&&(c=f._model.selectparentid(e)||"");if(typeof c!="undefined"){b=f._model.selecturl(e,c);n.get(b,function(p){p=n.parseJSON(p);f._view.update(e,p);g&&g.call(f,e,p)})}}else{b=f._model.selecturl(e,c);n.get(b,function(p){UXC.log("_url:",b,c);p=n.parseJSON(p);f._view.update(e,p);g&&g.call(f,e,p)})}return this},_updateNormal:function(e,a,c){var f=this,b;UXC.log("normal select");if(f._model.isFirst(e)){var d=f._model.next(e);if(d&&d.length){f._update(d,a,e.val());return this}}else{b=f._model.datacb(e)(c)}f._view.update(e,b);a&&a.call(f,e,b);return this}};function l(a){this._selector=a;this._items=[];this._isInited=false;this._init()}l.prototype={_init:function(){this._findAllItems(this._selector);UXC.log("select items.length:",this._items.length);this._initRelationship();return this},_findAllItems:function(a){this._items.push(a);if(a.is("[selecttarget]")){this._findAllItems(n(a.attr("selecttarget")))}},_initRelationship:function(){this._selector.data("FirstSelect",true);if(this._items.length>1){this._items[this._items.length-1].data("LastSelect",true);for(var c=0;c<this._items.length;c++){var b=this._items[c],a=this._items[c-1];if(a){b.data("PrevSelect",a);a.data("NextSelect",b);b.data("parentSelect",a)}}}},items:function(){return this._items},first:function(){return this._items[0]},last:function(){return this._items[this._items-1]},next:function(a){return a.data("NextSelect")},prev:function(a){return a.data("PrevSelect")},isFirst:function(a){return !!a.data("FirstSelect")},isLast:function(a){return !!a.data("LastSelect")},isStatic:function(a){return a.is("[selectdatacb]")},isAjax:function(a){return a.is("[selecturl]")},isInited:function(a){typeof a!="undefined"&&(this._isInited=a);return this._isInited},datacb:function(b){var a;b.attr("selectdatacb")&&(a=window[b.attr("selectdatacb")]);return a},selectparentid:function(b){var a;b.attr("selectparentid")&&(a=b.attr("selectparentid"));b.removeAttr("selectparentid");return a||""},selectvalue:function(b){var a=b.attr("selectvalue");b.removeAttr("selectvalue");return a||""},randomurl:function(b){var a=j.randomurl;b.is("[selectrandomurl]")&&(a=parseBool(b.attr("selectrandomurl")));return a},triggerInitChange:function(){var a=j.triggerInitChange,b=this.first();b.attr("selecttriggerinitchange")&&(a=parseBool(b.attr("selecttriggerinitchange")));return a},hideempty:function(b){var a=j.hideEmpty;b&&b.length&&b.is("[selecthideempty]")&&(a=parseBool(b.attr("selecthideempty")));return a},selecturl:function(d,c){var b=j.processUrl,a=d.attr("selecturl")||"";d.attr("selectprocessurl")&&window[d.attr("selectprocessurl")]&&(b=window[d.attr("selectprocessurl")]);a=printf(a,c);this.randomurl(d)&&(a=add_url_params(a,{rnd:new Date().getTime()}));b&&(a=b.call(d,a,c));return a},_userdatafilter:function(b){var a;b.attr("selectdatafilter")&&(a=window[b.attr("selectdatafilter")]);return a},dataFilter:function(c,a){var b=this._userdatafilter(c)||j.dataFilter;b&&(a=b(a,c));return a},beforeInited:function(){var a=j.beforeInited,b=this.first();b.attr("selectbeforeInited")&&window[b.attr("selectbeforeInited")]&&(a=window[b.attr("selectbeforeinited")]);return a},inited:function(){var a=j.inited,b=this.first();b.attr("selectinited")&&window[b.attr("selectinited")]&&(a=window[b.attr("selectinited")]);return a},change:function(b){var a=j.change;b.attr("selectchange")&&window[b.attr("selectchange")]&&(a=window[b.attr("selectchange")]);return a},allChanged:function(){var a=j.allChanged,b=this.first();b.attr("selectallchanged")&&window[b.attr("selectallchanged")]&&(a=window[b.attr("selectallchanged")]);return a},data:function(b,a){typeof a!="undefined"&&(b.data("SelectData",a));return b.data("SelectData")},hasVal:function(c,a){var b=false,a=a.toString();c.find("option").each(function(){var d=n(this);if(d.val()==a){b=true;return false}});return b}};function m(a,b){this._model=a;this._control=b;this._init()}m.prototype={_init:function(){return this},update:function(c,f){var d=this._model.selectvalue(c);f=this._model.dataFilter(c,f);this._model.data(c,f);this._control.trigger("SelectItemBeforeUpdate",[c,f]);this._removeExists(c);if(!f.length){if(this._model.hideempty(c)){c.hide();this._control.trigger("SelectItemUpdated",[c,f]);return}}else{!c.is(":visible")&&c.show()}var b=[],g,e;for(var r=0,a=f.length;r<a;r++){g=f[r];b.push(printf('<option value="{0}" {2}>{1}</option>',g[0],g[1],e))}n(b.join("")).appendTo(c);if(this._model.hasVal(c,d)){c.val(d)}this._control.trigger("SelectItemUpdated",[c,f])},_removeExists:function(a){a.find("> option:not([defaultoption])").remove()}};n(document).ready(function(a){setTimeout(function(){j(document.body)},100)})}(jQuery));(function(d){UXC.Form.initAutoFill=function(b,a){if(!(b&&b.length)){b=d(document)}a=a||location.href;UXC.log("UXC.Form.initAutoFill");b.find("form.js_autoFillUrlForm").each(function(){var c=d(this);c.find("input[type=text][name],input[type=password][name],textarea[name]").each(function(){var h=d(this);if(has_url_param(a,h.attr("name"))){h.val(f(get_url_param(a,h.attr("name")).replace(/[\+]/g," ")))}});c.find("select[name]").each(function(){var j=d(this),i=f(get_url_param(a,j.attr("name")).replace(/[\+]/g," "));if(has_url_param(a,j.attr("name"))){if(e(j,i)){j.val(get_url_param(a,j.attr("name")))}else{j.attr("selectvalue",i)}}})})};d(document).ready(function(a){UXC.Form.initAutoFill()});UXC.Form.initAutoFill.decodeFunc;function f(a){try{a=(UXC.Form.initAutoFill.decodeFunc||decodeURIComponent)(a)}catch(b){}return a}function e(c,a){var b=false,a=a.toString();c.find("option").each(function(){var h=d(this);if(h.val()==a){b=true;return false}});return b}}(jQuery));(function(d){UXC.Form.initNumericStepper=function(a){a&&(a=d(a));a.delegate(".js_NStepperPlus, .js_NStepperMinus","click",function(n){var r=d(this),o=c.target(r);if(!(o&&o.length)){return}var p=parseInt(c.fixed(o),10)||0;var b=d.trim(o.val()),m=c.step(o);b=(p?parseFloat(b):parseInt(b,10))||0;var l=c.minvalue(o),q=c.maxvalue(o);r.hasClass("js_NStepperPlus")&&(b+=m);r.hasClass("js_NStepperMinus")&&(b-=m);b<l&&(b=l);b>q&&(b=q);UXC.log(l,q,b,p,m);o.val(b.toFixed(p));c.callback(o)&&c.callback(o).call(o,r)})};UXC.Form.initNumericStepper.onchange;var c={target:function(a){var b;if(a.attr("nstarget")){if(/^\~/.test(a.attr("nstarget"))){b=a.parent().find(a.attr("nstarget").replace(/^\~[\s]*/g,""));!(b&&b.length)&&(b=d(a.attr("nstarget")))}else{b=d(a.attr("nstarget"))}}return b},fixed:function(a){return a.attr("nsfixed")},step:function(a){return parseFloat(a.attr("nsstep"))||1},minvalue:function(a){return parseFloat(a.attr("nsminvalue")||a.attr("minvalue"))||0},maxvalue:function(a){return parseFloat(a.attr("nsmaxvalue")||a.attr("maxvalue"))||100},callback:function(f){var a=UXC.Form.initNumericStepper.onchange,b;f.attr("nschangecallback")&&(b=window[f.attr("nschangecallback")])&&(a=b);return a}};d(document).ready(function(a){UXC.Form.initNumericStepper(d(document))})}(jQuery));