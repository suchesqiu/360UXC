(function(l){!window.UXC&&(window.UXC={log:function(){}});window.ZINDEX_COUNT=window.ZINDEX_COUNT||50001;window.Tips=UXC.Tips=k;function k(a){a=l(a);if(!(a&&a.length)){return this}if(a.length>1){return k.init(a)}this._model=new i(a);this._view=new j(this._model);this._init()}k.init=function(b){if(!b){return}b=l(b);if(!b.length){return}var a=[];b.each(function(){var c=l(this);if(c.data("initedTips")){return}a.push(new k(c))});return a};k.hide=function(){l("body > div.UTips").hide()};k.autoInit=true;k.tpl=null;k.offset={bottom:{x:15,y:15},left:{x:-28,y:5},top:{x:-2,y:-22}};k.minWidth=200;k.maxWidth=400;k.titleToTipsdata=function(a){a=l(a);if(!UXC.Tips.autoInit||(typeof window.event=="object"&&document.attachEvent)){a.each(function(){l(this).attr("tipsData",l(this).attr("title")).removeAttr("title")})}};k.prototype={_init:function(){var a=this;this._model.selector().data("tipIns",a);this._model.selector().on("mouseenter",h);return this},show:function(a){this._view.show(a)},hide:function(){this._view.hide()},selector:function(){return this._model.selector()},layout:function(a){return this._view.layout(a)},data:function(){return this._model.data()}};function i(a){this.tpl=g;this._selector=a;this._data;this._init()}i.prototype={_init:function(){this.update();return this},data:function(a){a&&this.update();return this._data},update:function(){if(!(this._selector.attr("title")||this._selector.attr("tipsData"))){return}this._data=l.trim(this._selector.attr("title")||this._selector.attr("tipsData")).replace(/(?:\r\n|\n\r|\r|\n)/g,"<br />");this._selector.removeAttr("title").removeAttr("tipsData");if(this._selector.data("initedTips")){return}this._selector.data("initedTips",true)},selector:function(){return this._selector}};function j(a){this._model=a;this._layout;this._init()}j.prototype={_init:function(){return this},show:function(y){var b=y.pageX,c=y.pageY;b+=UXC.Tips.offset.bottom.x;c+=UXC.Tips.offset.bottom.y;var e=l(document).scrollTop(),f=l(document).scrollLeft();var x=l(window).width(),v=l(window).height();var a=this.layout().width(),d=this.layout().height();var C=f+x-a,A=f;var D=e+v-d,B=e;var w=false,z=false;b>C&&(b=b-a+UXC.Tips.offset.left.x,c+=UXC.Tips.offset.left.y,w=true);b<A&&(b=A);c>D&&(c=c-d+UXC.Tips.offset.top.y,b+=UXC.Tips.offset.top.x,z=true);c<B&&(c=B);w&&z&&(c-=5);this.layout().css({left:b+"px",top:c+"px"});this.layout().show()},hide:function(){this.layout().hide()},layout:function(d){if(!this._layout){this._layout=l("#UXCTipsLayout");if(!(this._layout&&this._layout.length)){this._layout=l(UXC.Tips.tpl||this._model.tpl);this._layout.attr("id","UXCTipsLayout").css("position","absolute");this._layout.appendTo(document.body)}}if(d){var b=this._model.data(d);this._layout.html(b).css({width:"auto",left:"-9999px",top:"-9999px",display:"block"});var c=this._layout.width(),a=this._layout.height();c<UXC.Tips.minWidth&&this._layout.css("width",UXC.Tips.minWidth+"px");c>UXC.Tips.maxWidth&&this._layout.css("width",UXC.Tips.maxWidth+"px")}return this._layout}};l(document).ready(function(a){setTimeout(function(){if(!UXC.Tips.autoInit){return}k.titleToTipsdata(l("[title]"));l(document).delegate("*","mouseenter",function(b){var c=l(this);if(c.data("initedTips")){return}if(!(c.attr("title")||c.attr("tipsData"))){return}UXC.Tips.init(c);h.call(this,b)})},10)});function h(b){var c=l(this),d=c.data("tipIns");d.layout(1).css("z-index",ZINDEX_COUNT++);if(!d.data()){return}d.show(b);l(document).on("mousemove",e);c.on("mouseleave",a);function e(f){if(!d.layout().is(":visible")){l(document).unbind("mousemove",e);l(c).unbind("mouseleave",a);return}d.show(f)}function a(f){l(document).unbind("mousemove",e);l(c).unbind("mouseleave",a);d.hide()}}var g='<div class="UTips"></div>'}(jQuery));