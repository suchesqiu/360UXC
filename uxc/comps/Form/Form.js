(function(a){!window.UXC&&(window.UXC={log:function(){}});window.UXCForm=UXC.Form={disableButton:function(c,b){if(!c){return}c=a(c);b=b||1000;c.attr("disabled",true);setTimeout(function(){c.attr("disabled",false)},b)}}}(jQuery));function add_url_params(c,a){var d="";if(!a){a=c;c=location.href}if(c.indexOf("#")>-1){d=c.split("#")[1];c=c.split("#")[0]}for(var b in a){c=del_url_param(c,b);c.indexOf("?")>-1?c+="&"+b+"="+a[b]:c+="?"+b+"="+a[b]}d&&(c+="#"+d);c=c.replace(/\?\&/g,"?");return c}function del_url_param(d,g){var f="";if(d.indexOf("#")>-1){f=d.split("#")[1];d=d.split("#")[0]}if(d.indexOf("?")>-1){var h=d.split("?")[1];var d=d.split("?")[0];var e=h.split("&");var a=[];for(var c=0;c<e.length;c++){var b=e[c].split("=");b[0]=b[0].replace(/^\s+|\s+$/g,"");if(b[0].toLowerCase()==g.toLowerCase()){continue}a.push(b.join("="))}d+="?"+a.join("&")}if(f){d+="#"+f}return d}function get_url_param(d,f){var a="";if(d.indexOf("#")>-1){d=d.split("#")[0]}if(d.indexOf("?")>-1){var e=d.split("?")[1].split("&");for(var c=0;c<e.length;c++){var b=e[c].split("=");b[0]=b[0].replace(/^\s+|\s+$/g,"");if(b[0].toLowerCase()==f.toLowerCase()){a=b[1];break}}}return a}function has_url_param(c,d){var e=false;if(!d){d=c;c=location.href}if(/\?/.test(c)){c=c.split("?");c=c[c.length-1];c=c.split("&");for(var b=0,a=c.length;b<a;b++){if(c[b].split("=")[0].toLowerCase()==d.toLowerCase()){e=true;break}}}return e}(function(a){UXC.Form.initCheckAll=function(d){d=a(d);var e=d.find("input[type=checkbox][checktype]");e.each(function(){var f=a(this),g=f.attr("checktype").toLowerCase(),h=f.attr("checkfor").toLowerCase();if(g!="all"||!h){return}c(f,h);if(!f.data("initedCheckall")){f.data("initedCheckall",true);a(document).delegate(h,"click",function(j){var i=a(this);if(b(i)){return}c(f,h)})}})};a(document).ready(function(d){UXC.Form.initCheckAll(a(document))});a(document).delegate("input[type=checkbox][checktype][checkfor]","click",function(e){var d=a(this),f=d.attr("checktype").toLowerCase(),g=d.attr("checkfor").toLowerCase();UXC.log(f,g);switch(f){case"all":a(g).each(function(){var h=a(this);if(b(h)){return}d.prop("checked")&&h.prop("checked",true);!d.prop("checked")&&h.prop("checked",false)});break;case"inverse":a(g).each(function(){var h=a(this);if(b(h)){return}if(h.prop("checked")){h.prop("checked",false)}else{h.prop("checked",true)}});if(d.is("[checkall]")){c(d.attr("checkall"),g)}break}});function b(d){d=a(d);return d.is("[checktype]")&&d.is("[checkfor]")}function c(e,f){var d=true,e=a(e),f=a(f);f.each(function(){var g=a(this);if(g.is("[checktype]")||g.is("[checkfor]")){return}if(!g.prop("checked")){return d=false}});UXC.log("_isAll: ",d);e&&e.length&&e.prop("checked",d)}}(jQuery));(function(d){UXC.Form.initAutoSelect=function(k){k=d(k);k.find("select[defaultselect]").each(function(){var l=a(this);if(!(l&&l.length)){return}d.each(l,function(n,m){d(m).on("change",j)});d(l[l.length-1]).data("isLastSelect",true);d(l[0]).data("isFirstSelect",true);l[0].trigger("change")})};UXC.Form.initAutoSelect.hideEmpty=false;UXC.Form.initAutoSelect.dataFilter;d(document).ready(function(k){setTimeout(function(){UXC.Form.initAutoSelect(document)},100)});function j(m){var k=d(this),q;UXC.log(k.prop("name"));if(k.is("[selectvalue]")){q=d.trim(k.attr("selectvalue"));k.removeAttr("selectvalue");UXC.log(1,"_val",q);if(i(k,q)){UXC.log(1,1);k.val(q);var p=q;if(k.is("[selecttarget]")){var l=d(k.attr("selecttarget"));if(l.is("[selectvalue]")){p=l.attr("selectvalue");l.removeAttr("selectvalue")}if(l.is("[selecturl]")){var n=q,o=add_url_params(l.attr("selecturl"),{rnd:new Date().getTime()});if(l.data("parentSelect")){n=l.data("parentSelect").val()}o=o.replace(/\{0\}/g,n);e(l,o,p,b)}}}else{UXC.log(1,2);if(k.is("[selecturl]")){var n=q,o=add_url_params(k.attr("selecturl"),{rnd:new Date().getTime()});if(k.data("parentSelect")){n=k.data("parentSelect").val()}o=o.replace(/\{0\}/g,n);e(k,o,q,function(u){if(u.is("[selecttarget]")){var r=d(u.attr("selecttarget"));if(r.is("[selectvalue]")){q=r.attr("selectvalue");r.removeAttr("selectvalue")}if(r.is("[selecturl]")){var s=q,t=add_url_params(r.attr("selecturl"),{rnd:new Date().getTime()});if(r.data("parentSelect")){s=r.data("parentSelect").val()}t=t.replace(/\{0\}/g,s);e(r,t,q,b)}}})}}}else{q=k.val();UXC.log(2,"_val",q);if(f(k)){UXC.log(2,1);if(k.is("[selecttarget]")){UXC.log(2,1,1);var l=d(k.attr("selecttarget"));var p=q;if(l.is("[selectvalue]")){p=l.attr("selectvalue");l.removeAttr("selectvalue")}if(l.is("[selecturl]")){UXC.log(2,1,1,1,p);var n=q,o=add_url_params(l.attr("selecturl"),{rnd:new Date().getTime()});if(l.data("parentSelect")){n=l.data("parentSelect").val()}o=o.replace(/\{0\}/g,n);e(l,o,p,b)}}else{UXC.log(2,1,2);var l=k;if(l.is("[selecturl]")){var n=q,o=add_url_params(l.attr("selecturl"),{rnd:new Date().getTime()});if(l.data("parentSelect")){n=l.data("parentSelect").val()}UXC.log(n);o=o.replace(/\{0\}/g,n);if(l.data("isLastSelect")){if((parseInt(n)||0)<1){g(l);UXC.Form.initAutoSelect.hideEmpty&&l.hide()}return}e(l,o,q,b)}}}else{UXC.log(2,2);var q="",o=add_url_params(k.attr("selecturl"),{rnd:new Date().getTime()});k.data("parentSelect")&&(q=k.data("parentSelect").val());o=o.replace(/\{0\}/g,q);if(!k.data("isFirstSelect")&&((parseInt(q,10)||0)<1)){g(k);b(k);UXC.Form.initAutoSelect.hideEmpty&&k.hide()}else{e(k,o,q,b)}}}}function b(k){if(k.is("[selecttarget]")){d(k.attr("selecttarget")).trigger("change")}}function e(n,m,l,k){d.getJSON(m,function(r){if(UXC.Form.initAutoSelect.dataFilter){r=UXC.Form.initAutoSelect.dataFilter(r,n)}if(!r){return}g(n);if(UXC.Form.initAutoSelect.hideEmpty){!r.length&&n.hide();r.length&&n.show()}var q=[];for(var p=0,o=r.length;p<o;p++){q.push('<option value="'+r[p][0]+'">'+r[p][1]+"</option>")}d(q.join("")).appendTo(n);i(n,l)?n.val(l):h(n);k&&k(n)})}function c(k){var l=true;k.find("option").each(function(){var m=d(this);if(!m.is("[defaultoption]")){return l=false}});return l}function h(k){var l=k.find("option");if(l.length){k.val(l.first().val())}}function g(m){var n=m.find("option");for(var l=n.length-1;l>=0;l--){var k=d(n[l]);if(k.is("[defaultoption]")){continue}k.remove()}}function i(k,m){var l=false,m=m.toString();k.find("option").each(function(){var n=d(this);if(n.val()==m){l=true;return false}});return l}function f(k){var l=false;k.find("option").each(function(){var m=d(this);if(m.is("[defaultoption]")){return}l=true;return false});return l}function a(l,m){l=d(l);if(!m){m=[l];arguments.callee(l,m)}else{if(l.length&&l.is("[selecttarget]")){var k=d(l.attr("selecttarget"));if(k.length){k.data("parentSelect",m[m.length-1]);m.push(k);arguments.callee(k,m)}}}return m}}(jQuery));(function(b){UXC.Form.initAutoFill=function(c,d){if(!(c&&c.length)){c=b(document)}d=d||location.href;UXC.log("UXC.Form.initAutoFill");c.find("form.js_autoFillUrlForm").each(function(){var e=b(this);e.find("input[type=text][name],input[type=password][name],textarea[name]").each(function(){var f=b(this);if(has_url_param(d,f.attr("name"))){f.val(get_url_param(d,f.attr("name")))}});e.find("select[name]").each(function(){var f=b(this),g=get_url_param(d,f.attr("name"));if(has_url_param(d,f.attr("name"))){if(a(f,g)){f.val(get_url_param(d,f.attr("name")))}else{f.attr("selectvalue",g)}}})})};b(document).ready(function(c){UXC.Form.initAutoFill()});function a(c,e){var d=false,e=e.toString();c.find("option").each(function(){var f=b(this);if(f.val()==e){d=true;return false}});return d}}(jQuery));