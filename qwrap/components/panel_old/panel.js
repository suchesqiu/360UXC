(function(){function s(a,b){if(!document.body){throw new Error(["Panel","create error","Document body not found or not loaded!"])}return this._initPanel.apply(this,arguments)}s.IFRAME_SRC=location.protocol.toLowerCase()!="https:"?"about:blank":function(){var a=document.getElementsByTagName("script");return a[a.length-1].src.match(/^.*[\/\\]/)[0]+"blank.html"}();s.prototype=function(){var a=QW.Dom,b=QW.ObjectH;var c=100;var d=0;return{id:null,useIframe:null,draggable:false,resizable:false,visibility:false,panelRect:{},PANEL_CLASS:"panel",IFRAME_CLASS:"panel-iframe",INNER_CLASS:"panel-content",_panel:null,_content:null,_iframe:null,_initialized:false,_initPanel:function(e,f){if(this._initialized){return this}if(a.isElement(e)){this.renderPanel(e);b.mix(this,f||{},true)}else{b.mix(this,e||{},true);this._createPanelBox()}this.setPanelVisible(false);this._initialized=true;if(!this._panel.id){this._panel.id=(this.id||"FANFAN_PANEL_"+(d++))}return this},_createPanelBox:function(){this._panel=a.create('<div class="'+this.PANEL_CLASS+'"></div>');this._content=a.create('<div class="'+this.INNER_CLASS+'"></div>');this._panel.appendChild(this._content);if(this.useIframe){this._createIframe()}document.body.appendChild(this._panel)},setStyle:function(e,f){a.setStyle(this._panel,e,f);if(this._iframe){a.setStyle(this._iframe,e,f)}return this},addClassName:function(e){a.addClass(this._panel,e);if(this._iframe){a.addClass(this._iframe,e)}},resetClassName:function(){this._panel.className=this.PANEL_CLASS},getPanel:function(){return this._panel},getIframe:function(){return this._iframe},_createIframe:function(){this._iframe=a.create('<iframe class="'+this.IFRAME_CLASS+'" frameborder="0" src="'+s.IFRAME_SRC+'"></iframe>');this._panel.appendChild(this._iframe)},_chkPosCanbeFixed:function(){return !QW.Browser.ie||(QW.Browser.ie&&QW.Browser.version>6)},_chkIframe:function(){var e=!!window.ActiveXObject&&((QW.Browser.version<7&&document.getElementsByTagName("select").length)||document.getElementsByTagName("object").length);return e},saveRect:function(i,e,g,f){i=parseInt(i,10);e=parseInt(e,10);g=parseInt(g,10);f=parseInt(f,10);if(!isNaN(i)){this.panelRect.left=i}if(!isNaN(e)){this.panelRect.top=e}if(!isNaN(g)){this.panelRect.width=g}if(!isNaN(f)){this.panelRect.height=f}return this.panelRect},setPanelRect:function(i,e,g,f){a.setInnerRect(this._panel,i,e,g,f);if(f==null&&g!=null){f=this.getPanelAutoHeight(g)}this.saveRect(i,e,g,f);return this},setPanelSize:function(f,e){this.saveRect(null,null,f,e);a.setSize([this._panel],f,e);return this},setPanelXY:function(f,e){this.saveRect(f,e);a.setXY(this._panel,f,e);return this},setPanelFullscreen:function(){var e=a.getDocRect();var i,j,g,f;i=j=0;g=e.scrollWidth;f=e.scrollHeight;a.setRect(this._panel,i,j,g,f);return this},getPanelAutoHeight:function(j){var k=this._panel;var i=a.getStyle(k,"display");a.setStyle(k,"width",j+"px");if(i=="none"){a.setStyle(k,"display","block")}var f=a.paddingWidth(k);var g=a.borderWidth(k);var l=f[0]+f[2]+g[0]+g[2];var e=k.offsetHeight-l;a.setStyle(k,"display",i);return e},setPanelCenter:function(g,f){if(!isNaN(parseInt(g,10))){f=this.getPanelAutoHeight(g)}this.saveRect(null,null,g,f);var k=a.getDocRect();var i=parseInt((k.width-g)/2);var e=parseInt((k.height-f)/2);if(i<0){i=0}if(e<0){e=0}var j=this.getPanelPosition();if("fixed"!=j){i=i+k.scrollX;e=e+k.scrollY;if(i<=k.scrollX){i=k.scrollX}if(e<=k.scrollY){e=k.scrollY}}a.setRect(this._panel,i,e);return this},getPanelPosition:function(){return a.getStyle(this._panel,"position").toLowerCase()},appendToPanel:function(e){this._panel.appendChild(e)},appendToContent:function(e){this._content.appendChild(e)},showPanel:function(i,l,g,k,f){f=a.g(f);if(a.isElement(f)){var m=a.getRect(f);var j=this.getPanelPosition();i=parseInt(i,10)||0;l=parseInt(l,10)||0;i+=m.left;l+=m.top;if("fixed"==j){var e=a.getDocRect();i-=e.scrollX;l-=e.scrollY}}this.setPanelRect.apply(this,arguments);this.setPanelVisible(true)},autoAdjustPanelPosition:function(){var l=a.getRect(this._panel);var f=a.borderWidth(this._panel);var i=this.getPanelPosition();var e=a.getDocRect();var j=y=0;var g=e.width,k=e.height;if("fixed"!=i){j=e.scrollX;y=e.scrollY}else{if(QW.Browser.ie&&"fixed"==i){l.left-=e.scrollX;l.top-=e.scrollY;l.right-=e.scrollX;l.bottom-=e.scrollY}}if(l.left<j){this.setStyle({left:j+"px"})}if(l.top<y){this.setStyle({top:y+"px"})}if(l.right>g+j){this.setStyle({left:(g+j-l.width-f[1]-f[3])+"px"})}if(l.bottom>k+y){this.setStyle({top:(k+y-l.height-f[0]-f[2])+"px"})}},setPanelVisible:function(f,e){f=(f===false?"none":"block");if("block"===f&&!e){a.setStyle(this._panel,"zIndex",c++)}a.setStyle(this._panel,"display",f)},hidePanel:function(){this.setPanelVisible(false)},renderPanel:function(f){var e=a.query("."+this.INNER_CLASS,f);if(!e||!a.isElement(e[0])){throw new Error(["Panel","render error","Panel inner is not a HTMLElement!"])}this._panel=f;this._content=e[0];return this},detectPanel:function(){if(!this._panel||!a.g(this._panel.id)){alert('很抱歉，弹出层无法正常使用。\n可能是由于浏览器开启了"浮动广告拦截功能"，请尝试关闭该功能后重试。\n\n如何关闭"浮动广告拦截功能"请参阅帮助中心FAQ。');this.dispose();return false}return true},disposePanel:function(){this._iframe=this._content=this._panel=null;if("function"==typeof CollectGarbage){CollectGarbage()}},detect:function(){return this.detectPanel()},show:function(){if(!this.detect()){return false}this.showPanel();if(!this.detect()){return false}return true},render:function(){this.renderPanel.apply(this,arguments)},contains:function(e){return a.contains(this._panel,e)},hide:function(){return this.hidePanel()},dispose:function(){return this.disposePanel()},isVisible:function(){return this.visibility}}}();var q=QW.ClassH.extend(function(a,b){arguments.callee.$super.apply(this,arguments);QW.CustEvent.createEvents(this,"windowresize,beforeshow,aftershow,beforehide,afterhide");this._initBaseLayer.apply(this,arguments);A.push(this);return this},s,false);QW.ObjectH.mix(q.prototype,function(){var a=QW.Dom,b=QW.ObjectH,c=QW.CustEvent;return{center:false,shadow:false,position:"absolute",cue:false,corner:false,resizable:false,draggable:!!QW.Drag,dragProxy:null,withDragProxy:false,buttons:null,header:true,headerClassDrag:"panel-drag-enabled",body:true,footer:true,className:"panel-t2",width:null,height:null,left:null,top:null,useIframe:null,close:false,useEscKey:false,autoPosition:true,caption:"",visibility:false,content:"",_header:null,_body:null,_footer:null,_close:null,_resize:null,_shadow:null,_cue:null,_oDD:null,_corners:[],_initialized:false,_timer:null,_delay:300,BD_CLASS:"bd",FT_CLASS:"ft",HD_CLASS:"hd",SHADOW_CLASS:"sd",CLOSE_CLASS:"close",RESIZE_CLASS:"resize",ESC_KEY_CODE:27,_initBaseLayer:function(d,e){this._initialized=false;if(a.isElement(d)){this.render(d);b.mix(this,e||{},true)}else{b.mix(this,d||{},true);this.applyConfig(d)}this._addPopupEvent();this._initialized=true;return this},getPopup:function(){return this._panel},_chkPosition:function(){var d=this.position;if("fixed"==d.toLowerCase()&&!this._chkPosCanbeFixed()){d="absolute"}return d},_addPopupEvent:function(){this.initResizable();if(this.draggable){this.initDraggable()}var f=this;var e=function(){f._timer=setTimeout(function(){clearTimeout(f._timer);if(!f.isVisible()){return}f.fire("windowresize")},f._delay)};var d=function(g){f.dispose()};if(!QW.Browser.firefox){a.on(window,"unload",d)}a.on(window,"resize",e)},removeElements:function(){QW.ArrayH.map([this._corners[0],this._corners[1],this._resize,this._shadow,this._cue,this._close],function(d){if(d&&d.parentNode){a.removeNode(d)}});if(this._footer){this._footer.innerHTML=""}},createContainer:function(){if(this._initialized==false){var d=this._chkPosition();if(this.useIframe!=null){useIframe=this.useIframe}else{useIframe=this._chkIframe()}this.setStyle("position",d);if(this.header){this._header=a.create('<div class="'+this.HD_CLASS+'"></div>');this.appendToContent(this._header)}if(this.body){this._body=a.create('<div class="'+this.BD_CLASS+'"></div>');this.appendToContent(this._body)}if(this.footer){this._footer=a.create('<div class="'+this.FT_CLASS+'"></div>');this.appendToContent(this._footer)}}this.resetClassName();this.addClassName(this.className)},appendToBody:function(d){this._body.appendChild(d)},appendToHeader:function(d){this._header.appendChild(d)},appendToFooter:function(d){this._footer.appendChild(d)},initDraggable:function(){var f=this;if(!this.header){return}a.addClass(this._header,this.headerClassDrag);var g=0,d=0;if(this.shadow){g=this._shadow.offsetLeft;d=this._shadow.offsetTop}var e=new QW.SimpleDrag({oSrc:this._panel,oHdl:this._header,oProxy:this.dragProxy,withProxy:this.withDragProxy})},initResizable:function(){},applyConfig:function(d){this.removeElements();this.createContainer();this.createButtons();this.createCorners();this.createDirArrow();this.createShadow();this.createCloseBtn();if(this.caption){this.setCaption(this.caption)}if(this.content){this.setContent(this.content)}return this},createButtons:function(){if(this.buttons&&this._footer){var d=this.buttons;var g=d.length;for(var e=0;e<g;e++){var f=a.create("<button></button>");a.set(f,d[e]);a.appendChild(this._footer,f)}}},createCloseBtn:function(){if(this.close){var e=this;var d=function(){e.hide()};this._close=a.create('<span class="'+this.CLOSE_CLASS+'"></span>');this.appendToPanel(this._close);a.on(this._close,"click",d)}},createShadow:function(){if(this.shadow){this._shadow=a.create('<span class="'+this.SHADOW_CLASS+'"></span>');this.appendToPanel(this._shadow)}},createCorners:function(){if(this.corner){this._corners[0]=a.create('<span class="co1"></span>');this._corners[1]=a.create('<span class="co2"></span>');this._corners[0].innerHTML=this._corners[1].innerHTML="<span></span>";this.appendToPanel(this._corners[0]);this.appendToPanel(this._corners[1])}},createDirArrow:function(){if(this.cue){this._cue=a.create('<span class="cue"></span>');this.appendToPanel(this._cue)}},setContent:function(d){if(typeof d=="object"){this._body.innerHTML="";this.appendToBody(d)}else{this._body.innerHTML=d}return this._body},setCaption:function(d){if(this._header){this._header.innerHTML="<h3>"+d+"</h3>"}},setHeader:function(d){this.setCaption(d)},setFooter:function(d){if(this._footer){this._footer.innerHTML=d}},setPopupCenter:function(e,d){this.setPanelCenter(e,d);return this},showPopup:function(i,d,g,e,f){i=i||this.left;d=d||this.top;g=g||this.width;e=e||this.height;this.showPanel(i,d,g,e,f);if(this.center&&!a.isElement(f)){i=i||g||this.panelRect.width;d=d||e||this.panelRect.height;this.setPopupCenter(i,d)}if(!this.center&&this.autoPosition){this.adjustPosition()}if(isNaN(parseInt(g,10))){g=this._panel.offsetWidth;if(this._shadow){a.setStyle(this._shadow,"width",g)}}return this},renderPopup:function(n){var f=this;var l=this._chkPosition();this.setStyle("position",l);var d=parseInt(a.getCurrentStyle(n,"width"),10)||0;if(d){this.width=d}var g=a.query("."+this.SHADOW_CLASS,n);var m=a.query("."+this.HD_CLASS,n);var k=a.query("."+this.BD_CLASS,n);var i=a.query("."+this.FT_CLASS,n);var e=a.query("."+this.CLOSE_CLASS,n);if(!k){throw new Error(["Popup","render error","Panel body HTMLElement can not be finded!"])}this._shadow=g?g[0]:null;this._header=m?m[0]:null;this._body=k?k[0]:null;this._footer=i?i[0]:null;this._close=e?e[0]:null;if(this._close){var j=function(){f.hide()};a.on(this._close,"click",j)}return this},hidePopup:function(){this.hidePanel();return this},getRect:function(){return this.panelRect},getBounds:function(){return this.getRect()},setPopupRect:function(){return this.setPanelRect.apply(this,arguments)},adjustPosition:function(){this.autoAdjustPanelPosition()},disposePopup:function(){if(this){this.disposePanel()}this._header=this._body=this._footer=null;this._cue=this._shadow=this._resize=this._close=null;if("function"==typeof CollectGarbage){CollectGarbage()}},detectPopup:function(){var d=this.detectPanel();if(!d){this.dispose()}return d},show:function(){if(!this.detect()){return false}if(!this.fire("beforeshow")){return false}this.showPopup.apply(this,arguments);this.visibility=true;this.fire("aftershow");if(!this.detect()){return false}return true},detect:function(){return this.detectPopup()},hide:function(){if(!this.detect()){return false}if(!this.fire("beforehide")){return false}this.hidePopup();this.visibility=false;this.fire("afterhide");if(!this.detect()){return false}return true},isVisible:function(){return this.visibility},render:function(){return this.renderPopup.apply(this,arguments)},dispose:function(){this.disposePopup()}}}(),true);var o=QW.ClassH.extend(function(a){arguments.callee.$super.apply(this,arguments);QW.CustEvent.createEvents(this,"blur,aftershowtimer,afterhidetimer");this._addLayerPopupListener();if(this.timeoutListener){this._initTimeoutListener()}return this},q,false);QW.ObjectH.mix(o.prototype,function(){var a=QW.Dom,b=QW.CustEvent;return{hideTimeout:500,showTimeout:500,hideTimer:null,timeoutListener:false,_isInitTimeoutLsr:false,showTimer:null,showTimerEvents:"mouseover",hideTimerEvents:"mouseout",_addLayerPopupListener:function(){var d=this;var c=function(e){var f=e.target;if(!d.contains(f)&&d.visibility){if(d.visibility){d.fire("blur");d.hide()}}};a.on(document,"mousedown",c);a.on(document,"keyup",c)},_initTimeoutListener:function(){if(!this._isInitTimeoutLsr){var c=this;a.on(this.getPopup(),this.showTimerEvents,function(){if(!c.fire("aftershowtimer")){return}c.clearAllTimeout()});a.on(this.getPopup(),this.hideTimerEvents,function(){if(!c.fire("afterhidetimer")){return}c.delayHide()});this._isInitTimeoutLsr=true}},delayHide:function(c){this._initTimeoutListener();this.hideTimeout=parseInt(c,10)||this.hideTimeout;this.clearAllTimeout();var d=this;this.hideTimer=setTimeout(function(){d.hide()},this.hideTimeout)},delayShow:function(){this._initTimeoutListener();var d=this;var c=arguments;this.clearAllTimeout();this.showTimer=setTimeout(function(){d.show.apply(d,c)},this.showTimeout)},clearAllTimeout:function(){clearTimeout(this.hideTimer);clearTimeout(this.showTimer)},show:function(){if(!this.detect()){return false}if(!this.fire("beforeshow")){return false}this.clearAllTimeout();this.showPopup.apply(this,arguments);this.visibility=true;this.fire("aftershow");if(!this.detect()){return false}return true},hide:function(){if(!this.fire("beforehide")){return false}this.clearAllTimeout();this.hidePopup();this.visibility=false;this.fire("afterhide");return true}}}(),true);var t=QW.ClassH.extend(function(a,b){a=a||{};b=b||{};this._initDialog(a,b);return this},q,false);QW.ObjectH.mix(t.prototype,{close:true,modal:true,center:true,shadow:true,useEscKey:true,useIframe:null,header:true,body:true,footer:true,content:"",caption:"",className:"panel-t1",mask:null,MASK_CLASS:"mask",_initDialog:function(a,b){if(QW.Dom.isElement(a)){this.mask=new v({useIframe:b.useIframe});b.className=b.className||this.className;b.useIframe=false}else{this.mask=new v({useIframe:a.useIframe});a.className=a.className||this.className;a.useIframe=false}t.$super.call(this,a,b);return this},setMaskFullscreen:function(){this.mask.setPanelFullscreen()},setDialogCenter:function(e,a,d,b,c){this.setPopupCenter.apply(this,arguments)},showDialog:function(e,a,d,b,c){if(this.modal){this.showMask()}else{this.hideMask()}this.showPopup.apply(this,arguments);return this},setDialogRect:function(){return this.setPopupRect.apply(this,arguments)},showMask:function(){this.mask.show.apply(this.mask,arguments);return this.mask},hideMask:function(){this.mask.hide();return this.mask},hideDialog:function(){this.hidePopup();this.hideMask()},show:function(){if(!this.detect()){return false}if(!this.fire("beforeshow")){return false}this.showDialog.apply(this,arguments);this.visibility=true;this.fire("aftershow");if(!this.detect()){return false}return true},hide:function(){if(!this.fire("beforehide")){return false}this.hideDialog();this.visibility=false;this.fire("afterhide");return true},dispose:function(){this.disposePopup();this.mask.dispose()}},true);var u=function(){var a=null;return{getInstance:function(b){if(a){return a}return new b()}}}();var v=QW.ClassH.extend(function(a,b){QW.CustEvent.createEvents(this,"beforeshow,aftershow");return this._initMask.apply(this,arguments)},s,false);QW.ObjectH.mix(v.prototype,function(){var a=QW.Dom,b=QW.ObjectH;return{_scrollTimer:null,_resizeTimer:null,scrollInterval:50,resizeInterval:50,leftOffset:200,topOffset:200,rightOffset:0,bottomOffset:200,MASK_CLASS:"mask",_initMask:function(c){c=c||{};c.useIframe=c.useIframe==null?this._chkIframe():c.useIframe;b.mix(this,c,true);this._addMaskEvent();v.$super.call(this,c);var d=this._chkPosCanbeFixed()?"fixed":"absolute";this.addClassName(this.MASK_CLASS);this.setStyle("position",d);return this},_addMaskEvent:function(){var c=this;if(!this._chkPosCanbeFixed()){a.on(window,"scroll",function(){clearTimeout(c._scrollTimer);c._scrollTimer=setTimeout(function(){clearTimeout(c._scrollTimer);c.adaptBounds()},c.scrollInterval)});a.on(window,"resize",function(){clearTimeout(c._resizeTimer);c._resizeTimer=setTimeout(function(){clearTimeout(c._resizeTimer);c.adaptBounds()},c.resizeInterval)})}},adaptBounds:function(){var e=this.getPanel();if(!e){return}var f=a.getStyle(e,"position").toLowerCase();if("fixed"!=f){var d=a.getDocRect();var c=a.getRect(this.getPanel());var g=y=w=h=0;g=d.scrollX-this.leftOffset<=0?0:d.scrollX-this.leftOffset;y=d.scrollY-this.topOffset<=0?0:d.scrollY-this.topOffset;w=this.rightOffset;h=this.bottomOffset;w+=d.width;h+=d.height;if(c.width>w){w=null}if(c.height>h){h=null}this.setPanelRect(g,y,w,h)}else{this.setStyle("width","100%");this.setStyle("height","100%");this.setStyle("left","0");this.setStyle("top","0")}},show:function(){if(!this.detect()){return false}if(!this.fire("beforeshow")){return false}this.showPanel.apply(this,arguments);this.adaptBounds();this.visibility=true;if(!this.detect()){return false}this.fire("aftershow");return true}}}(),true);var z={WARNING:"bb-confirm-warning",SUCCESS:"bb-confirm-success",FAILURE:"bb-confirm-failure",NULL:"bb-confirm-null"};var B={OK:{key:"OK",text:"确定",retVal:1},CANCEL:{key:"CANCEL",text:"取消",retVal:2},ABORT:{key:"ABORT",text:"放弃",retVal:3},RETRY:{key:"RETRY",text:"重试",retVal:4},IGNORE:{key:"IGNORE",text:"忽略",retVal:5},YES:{key:"YES",text:"&nbsp;是&nbsp;",retVal:6},NO:{key:"NO",text:"&nbsp;否&nbsp;",retVal:7}};var C=QW.ClassH.extend(function(a,b){arguments.callee.$super.apply(this,arguments);QW.CustEvent.createEvents(this,"close");return this._initMessageBox.apply(this,arguments)},t,false);QW.ObjectH.mix(C.prototype,{icon:z.WARNING,singleton:false,focusButton:null,header:false,className:"panel-t6",position:"fixed",width:500,lazyShow:false,eventArgs:{},buttons:[B.OK],_contentBox:null,_contentHeader:null,_contentBody:null,_initMessageBox:function(){this._initContentBox();if(this.caption){this.setCaption(this.caption)}if(this.content){this.setContent(this.content)}if(!this.lazyShow){this.show()}return this},_initContentBox:function(){var b=this.buttons,c=this;this._contentBox=QW.Dom.create('<div class="'+this.icon+'"></div>');this._contentHeader=document.createElement("h4");this._contentBody=document.createElement("div");this._contentBox.appendChild(this._contentHeader);this._contentBox.appendChild(this._contentBody);this._body.appendChild(this._contentBox);if(this.buttons&&this.buttons.length){this._contentFooter=QW.Dom.create('<p class="submit"></p>');this._contentBox.appendChild(this._contentFooter)}new function a(){if(!b||!b.length){return}for(var e=0;e<b.length;e++){if("key" in b[e]&&"text" in b[e]&&"retVal"&&b[e]){c[b[e].key]=QW.Dom.create("<button></button>");var d=QW.Dom.create("<span>&nbsp;&nbsp;</span>");c._contentFooter.appendChild(c[b[e].key]);c._contentFooter.appendChild(d);c[b[e].key].innerHTML=b[e].text;(function(f){QW.Dom.on(c[b[f].key],"click",function(g){c.eventArgs={evt:g,retVal:b[f].retVal};c.hide()})})(e)}}}},createButtons:function(){},showDialog:function(e,a,d,b,c){if(this.modal){this.showMask()}else{this.hideMask()}this.showPopup.apply(this,arguments);if(this.focusButton&&this.focusButton.key&&this[this.focusButton.key]){this[this.focusButton.key].focus()}return this},hide:function(){var a=new QW.CustEvent(this,"close");QW.ObjectH.mix(a,this.eventArgs);if(!this.fire(a)){return false}t.prototype.hide.call(this);if(this.singleton){this.dispose()}return true},setCaption:function(a){if(this._contentHeader){this._contentHeader.innerHTML=a}},setContent:function(a){if(!this._contentBody){return false}if(QW.Dom.isElement(a)){this._contentBody.appendChild(a)}else{this._contentBody.innerHTML=a}return true}},true);QW.ObjectH.mix(C,{alert:function(b){var a={caption:"",content:"",singleton:true,buttons:[B.OK],focusButton:B.OK};a=QW.ObjectH.mix(a,b,true);return new C(a)},confirm:function(b){var a={caption:"",content:"",singleton:true,buttons:[B.OK,B.CANCEL],focusButton:B.OK};a=QW.ObjectH.mix(a,b,true);return new C(a)}},true);var p=function(a){this.constructor=arguments.callee;this.manager=a};p.CLASSLIST={messagebox:C,layerpopup:o,dialog:t};p.prototype=function(){return{create:function(c){c=new String(c).toLowerCase();if(p.CLASSLIST[c]){var d=Array.prototype.slice.call(arguments,1);var a=p.CLASSLIST[c];var b=function(){a.apply(this,d)};b.prototype=a.prototype;var e=new b;this.manager.push(e);return e}else{}}}}();var r=function(){this.constructor=arguments.callee;this.list=[];QW.CustEvent.createEvents(this,"esc");this.bindListener()};r.prototype=function(){return{ESC_KEY_CODE:27,bindListener:function(){var b=this;var a=function(c){var d=c.keyCode;if(d==b.ESC_KEY_CODE){b.fire("esc")}};QW.Dom.on(document,"keydown",a);return this},push:function(a){var b=this;a.show=function(c){return function(){b.moveLast(a);return c.apply(this,arguments)}}(a.show);this.moveLast(a);return this},moveLast:function(b){var a=QW.ArrayH.indexOf(this.list,b);if(a==-1){this.list.push(b);return this}if(a<this.list.length-1){this.list.splice(a,1);this.list.push(b)}return this}}}();var A=new r();var x=new p(A);A.on("esc",function(){for(var a=A.list.length-1;a>-1;--a){if(A.list[a].visibility){A.list[a].hide();break}}});QW.provide("Panel",s);QW.provide("BaseLayer",q);QW.provide("LayerPopup",o);QW.provide("Dialog",t);QW.provide("Singleton",u);QW.provide("Mask",v);QW.provide("MB_ICON",z);QW.provide("MB_BUTTON",B);QW.provide("MessageBox",C);QW.provide("PanelFactory",p);QW.provide("PanelManager",r);QW.provide("panelManager",A);QW.provide("panelFactory",x)})();