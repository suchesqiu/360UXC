void function(){var h=false;var c;var b=0;var a=[];var g=!-[1]&&!window.XMLHttpRequest;function d(i){this.model=new f(i);this.view=new e(this.model);this.model.id=++b;a.push(this)}d.exec=function(i){var j=new d(i).init();return j};d.closeAll=function(){for(var k=a.length-1;k>=0;k--){try{a[k].view.close()}catch(j){}}a=[]};d.prototype={init:function(){if(!h){c=document.createElement("div");document.body.appendChild(c);h=true}this.view.init();return this},setIndex:function(i){this.view.setIndex(i)}};function f(i){this.id;this.tpl;this.msg;this.callback;this.submitCallback;this.cancelCallback;this.closeCallback;this.initCallback;this.dialog;this.autoVertical=true;for(var j in i){this[j]=i[j]}this.callback=this.callback||this.submitCallback;this.autoy=true}f.prototype={getDialog:function(){var i=this;if(!i.dialog){i.dialog=document.createElement("div");i.dialog.innerHTML=i.tpl;c.appendChild(this.dialog)}return i.dialog},topIns:function(){if(!a.length){return null}var k=a[a.length-1];for(var j=a.length-2;j>=0;j--){if(a[j].model.id>k.model.id){k=a[j]}}return k}};function e(i){this.model=i}e.prototype={init:function(){this.initDialog();this.displayMask();this.model.getDialog().style.zIndex=getMaxIndex();this.show()},initDialog:function(){var i=this;var j=i.model.getDialog();xeach(getClass("text__",j),function(k){if(i.model.msg){k.innerHTML=i.model.msg}});xeach(getClass("close__",j),function(k){k.onclick=function(l){stopPropagation(l);if(i.model.closeCallback){if(i.model.closeCallback.call(i,this,l)===false){return false}}i.close();return false}});xeach(getClass("cancel__",j),function(k){k.onclick=function(l){stopPropagation(l);if(i.model.cancelCallback){if(i.model.cancelCallback.call(i,this,l)===false){return false}}i.close();return false}});xeach(getClass("submit__",j),function(k){k.onclick=function(l){stopPropagation(l);if(i.model.callback){if(i.model.callback.call(i,this,l)===false){return false}}i.close();return false}});attach_event_f(window,"resize",function(k){if(!i.model.autoy){return}if(!a.length){return}if(XMask.isHide()){return}i.show()});attach_event_f(window,"scroll",function(k){if(!i.model.autoVertical){return}if(!a.length){return}if(XMask.isHide()){return}i.show()});if(i.model.initCallback){i.model.initCallback.call(this,i.model.getDialog())}},show:function(){var k=this;var j=this.model.getDialog();var i=viewport_f();if(g){j.style.position="absolute";j.style.left=(i.max_width-j.offsetWidth)/2+"px";j.style.top=i.scrollTop+(i.height-j.offsetHeight)/2+"px";if(i.height<j.offsetHeight){j.style.top=i.scrollTop+"px"}}else{j.style.position="absolute";j.style.left=(i.max_width-j.offsetWidth)/2+"px";j.style.top=(i.height-j.offsetHeight)/2+"px";if(k.model.autoVertical){j.style.position="fixed";if(i.height<j.offsetHeight){j.style.top="0px"}}else{j.style.top=i.scrollTop+(i.height-j.offsetHeight)/2+"px";if(i.height<j.offsetHeight){j.style.top=i.scrollTop+"px"}}}},hide:function(){this.close()},setIndex:function(i){this.model.getDialog().style.zIndex=i},close:function(){this.isNull=true;if(!a.length){return}for(var j=a.length-1;j>=0;j--){var l=a[j];if(l.model.id===this.model.id){a=remove_array_item(a,j);break}}c.removeChild(this.model.dialog);if(!a.length){this.hideMask()}else{var k=this.model.topIns();if(k&&k.setIndex){k.setIndex(getMaxIndex())}}},hideMask:function(){if(!isFF()){KillClass(document.documentElement,"MASK_OVERFLOW")}XMask.exec().hide()},displayMask:function(){if(!isFF()){AddClass(document.documentElement,"MASK_OVERFLOW")}XMask.exec().show()}};window.XDialog=d}();