(function(){var i=QW.CustEvent,g=QW.ObjectH.mix;var h=function(b,a,c){g(this,c);g(this,{action:b,dur:a!=null?a:400,_timeStamp:new Date()});i.createEvents(this,ANIM_EVENTS)};ANIM_EVENTS=["beforestart","enterframe","pause","resume","end","reset"];function j(a){if(a._requestID!=null){window.cancelRequestAnimationFrame(a._requestID);a._requestID=null}}function f(d,a,c,e){if(d._requestID==null){if(null==a){a=0}if(null==c){c=1}d.per=a;d._timeStamp=new Date()-d.per*d.dur;var b=function(l){if(d.per>=c){j(d);d.fire("end")}else{d.per=Math.min(1,(l-d._timeStamp)/d.dur);if(d.fire("enterframe")!==false){d.action(d.per)}d._requestID=window.requestAnimationFrame(b)}};if(d.fire("enterframe")!==false){d.action(d.per)}if(e){b(new Date())}else{d._requestID=window.requestAnimationFrame(b)}}}g(h.prototype,{start:function(){j(this);this.fire("beforestart");f(this);return true},reset:function(){j(this);f(this,0,0,true);this.fire("reset");return true},pause:function(){if(this._requestID){j(this);this.fire("pause");return true}return false},resume:function(){if(!this._requestID&&this.per&&this.per<1){this.fire("resume");f(this,this.per);return true}return false},cancel:function(){this.resume();if(this._requestID!=null){j(this);f(this,1,1,true);return true}return false}});QW.provide("Anim",h)})();