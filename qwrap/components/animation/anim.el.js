(function(){var x=QW.Anim,w=QW.ClassH.extend,v=QW.NodeH.g,k=QW.ObjectH.mix,a=QW.ObjectH.isFunction,m=QW.ObjectH.isString,s=QW.DomU.isElement,q=QW.ObjectH.isPlainObject,t=QW.NodeH.isVisible,b=QW.NodeH.setStyle,i=QW.NodeH.getCurrentStyle,d=QW.NodeH.getStyle,u=QW.NodeH.removeStyle,n=Array.map||QW.ArrayH.map,l=QW.NodeH.show,j=QW.NodeH.hide;function r(z,A,g,y){this.el=z;this.attr=g;this.anim=y;if(m(A)){if(A in f.agentHooks){A=f.agentHooks[A](A,g,z,y)}else{A=f.agentHooks._default(A,g,z,y)}}else{if(a(A)){A=A(A,g,z,y)}else{if(!q(A)){A={to:A}}}}k(this,A);this.init()}k(r.prototype,{setValue:function(g){b(this.el,this.attr,g)},getValue:function(){return i(this.el,this.attr)},getUnit:function(y){if(this.unit){return this.unit}var g=this.getValue();if(g){return g.toString().replace(/^[+-]?[\d\.]+/g,"")}return""},init:function(){var y,A,z,g;if(null!=this.from){y=parseFloat(this.from)}else{y=parseFloat(this.getValue())||0}A=parseFloat(this.to);z=this.by!=null?parseFloat(this.by):(A-y);this.from=y;this.by=z;this.unit=this.getUnit()},action:function(y){var z=this.unit;var g=this.from+this.easing(y,this.by);g=g.toFixed(6);this.setValue(g+z)}});var p=w(function(z,g,y){this.__overflow=d(z,"overflow");b(z,"overflow","hidden");p.$super.apply(this,arguments)},r);k(p.prototype,{getUnit:function(y){if(this.unit){return this.unit}var g=this.getValue();if(g){return g.toString().replace(/^[+-]?[\d\.]+/g,"")}return"px"},finished:function(){if(this.__overflow){b(this.el,"overflow",this.__overflow)}}},true);var o=w(function(){o.$super.apply(this,arguments)},r);k(o.prototype,{getValue:function(){return this.el[this.attr]|0},setValue:function(g){this.el[this.attr]=Math.round(g)}},true);var e=w(function(){e.$super.apply(this,arguments)},r);k(e.prototype,{parseColor:function(z){var y={rgb:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,hex:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,hex3:/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i};if(z.length==3){return z}var g=y.hex.exec(z);if(g&&g.length==4){return[parseInt(g[1],16),parseInt(g[2],16),parseInt(g[3],16)]}g=y.rgb.exec(z);if(g&&g.length==4){return[parseInt(g[1],10),parseInt(g[2],10),parseInt(g[3],10)]}g=y.hex3.exec(z);if(g&&g.length==4){return[parseInt(g[1]+g[1],16),parseInt(g[2]+g[2],16),parseInt(g[3]+g[3],16)]}return[0,0,0]},init:function(){var z,y,B,g;var A=this.parseColor;if(null!=this.from){z=this.from}else{z=this.getValue()}z=A(z);y=this.to||[0,0,0];y=A(y);B=this.by?A(this.by):n(y,function(D,C){return D-z[C]});this.from=z;this.to=y;this.by=B;this.unit=""},getValue:function(){var g=i(this.el,this.attr);return this.parseColor(g)},setValue:function(g){if(typeof g=="string"){b(this.el,this.attr,g)}else{b(this.el,this.attr,"rgb("+g.join(",")+")")}},action:function(y){var z=this;var g=this.from.map(function(A,B){return Math.max(Math.floor(A+z.easing(y,z.by[B])),0)});this.setValue(g)}},true);var h={"color$":e,"^scroll":o,"width$|height$|top$|bottom$|left$|right$":p,easing:null,".*":r};function c(y,z){for(var g in y){var A=new RegExp(g,"i");if(A.test(z)){return y[g]}}return null}var f=w(function(z,y,g,B){z=v(z);if(!s(z)){throw new Error(["Animation","Initialize Error","Element Not Found!"])}B=B||function(D,E){return E*D};this.options=y;var C=[];var A=function(D){for(var E=0;E<C.length;E++){C[E].action(D)}};this.agents=C;f.$super.call(this,A,g);this.on("beforestart",function(F){for(var E in y){var D=c(h,E);agent=new D(z,y[E],E,F.target);agent.easing=agent.easing||B;C.push(agent)}});this.on("end",function(D){for(var E=0;E<C.length;E++){var F=C[E];if(F&&F.finished){F.finished()}}})},x);f.agentHooks={show:function(A,g,z,y){l(z);return{from:0,to:i(z,g)}},hide:function(B,g,z,A){var y=i(z,g);A.on("end",function(){b(z,g,y);j(z)});return{from:y,to:0}},toggle:function(A,g,z,y){if(!t(z)){return f.agentHooks.show.apply(this,arguments)}else{return f.agentHooks.hide.apply(this,arguments)}},_default:function(B,g,z,y){var A=B.split(/\s+/g);if(A.length>=2){return{from:A[0],to:A[1]}}else{return{to:A[0]}}}};QW.provide("ElAnim",f)})();